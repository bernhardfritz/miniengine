(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function Vi(e){const t=document.createElement("canvas");e.innerHTML="",e.appendChild(t);const n=t.getContext("webgl2");if(n===null)throw new Error("Error creating WebGL2 context.");return n}async function Eo(e,t){const n=t instanceof WebGL2RenderingContext?t:Vi(t),r=await e(n);let o=performance.now();const i=a=>{r(a-o),o=a,requestAnimationFrame(i)};requestAnimationFrame(i)}/* @license twgl.js 5.5.4 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */let Ft=Float32Array;function Me(e,t,n){const r=new Ft(3);return e&&(r[0]=e),t&&(r[1]=t),n&&(r[2]=n),r}function Di(e,t,n){return n=n||new Ft(3),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function $i(e,t,n){return n=n||new Ft(3),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function so(e,t,n){n=n||new Ft(3);const r=e[2]*t[0]-e[0]*t[2],o=e[0]*t[1]-e[1]*t[0];return n[0]=e[1]*t[2]-e[2]*t[1],n[1]=r,n[2]=o,n}function er(e,t){t=t||new Ft(3);const n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=Math.sqrt(n);return r>1e-5?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=0,t[1]=0,t[2]=0),t}function Zi(e,t,n){return n=n||new Ft(3),n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}let Y=Float32Array;function Gi(e){const t=Y;return Y=e,t}function Hi(e,t){return t=t||new Y(16),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t}function Wi(){return new Y(16).fill(0)}function Ao(e,t){return t=t||new Y(16),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function xr(e){return e=e||new Y(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Yi(e,t){if(t=t||new Y(16),t===e){let b;return b=e[1],e[1]=e[4],e[4]=b,b=e[2],e[2]=e[8],e[8]=b,b=e[3],e[3]=e[12],e[12]=b,b=e[6],e[6]=e[9],e[9]=b,b=e[7],e[7]=e[13],e[13]=b,b=e[11],e[11]=e[14],e[14]=b,t}const n=e[0*4+0],r=e[0*4+1],o=e[0*4+2],i=e[0*4+3],a=e[1*4+0],s=e[1*4+1],u=e[1*4+2],l=e[1*4+3],f=e[2*4+0],h=e[2*4+1],d=e[2*4+2],_=e[2*4+3],m=e[3*4+0],p=e[3*4+1],y=e[3*4+2],v=e[3*4+3];return t[0]=n,t[1]=a,t[2]=f,t[3]=m,t[4]=r,t[5]=s,t[6]=h,t[7]=p,t[8]=o,t[9]=u,t[10]=d,t[11]=y,t[12]=i,t[13]=l,t[14]=_,t[15]=v,t}function gr(e,t){t=t||new Y(16);const n=e[0*4+0],r=e[0*4+1],o=e[0*4+2],i=e[0*4+3],a=e[1*4+0],s=e[1*4+1],u=e[1*4+2],l=e[1*4+3],f=e[2*4+0],h=e[2*4+1],d=e[2*4+2],_=e[2*4+3],m=e[3*4+0],p=e[3*4+1],y=e[3*4+2],v=e[3*4+3],b=d*v,A=y*_,I=u*v,w=y*l,R=u*_,U=d*l,$=o*v,Z=y*i,G=o*_,H=d*i,K=o*l,Q=u*i,ne=f*p,ie=m*h,ae=a*p,re=m*s,oe=a*h,_e=f*s,gt=n*p,ke=m*r,Mt=n*h,Tt=f*r,pn=n*s,yn=a*r,ro=b*s+w*h+R*p-(A*s+I*h+U*p),oo=A*r+$*h+H*p-(b*r+Z*h+G*p),io=I*r+Z*s+K*p-(w*r+$*s+Q*p),ao=U*r+G*s+Q*h-(R*r+H*s+K*h),se=1/(n*ro+a*oo+f*io+m*ao);return t[0]=se*ro,t[1]=se*oo,t[2]=se*io,t[3]=se*ao,t[4]=se*(A*a+I*f+U*m-(b*a+w*f+R*m)),t[5]=se*(b*n+Z*f+G*m-(A*n+$*f+H*m)),t[6]=se*(w*n+$*a+Q*m-(I*n+Z*a+K*m)),t[7]=se*(R*n+H*a+K*f-(U*n+G*a+Q*f)),t[8]=se*(ne*l+re*_+oe*v-(ie*l+ae*_+_e*v)),t[9]=se*(ie*i+gt*_+Tt*v-(ne*i+ke*_+Mt*v)),t[10]=se*(ae*i+ke*l+pn*v-(re*i+gt*l+yn*v)),t[11]=se*(_e*i+Mt*l+yn*_-(oe*i+Tt*l+pn*_)),t[12]=se*(ae*d+_e*y+ie*u-(oe*y+ne*u+re*d)),t[13]=se*(Mt*y+ne*o+ke*d-(gt*d+Tt*y+ie*o)),t[14]=se*(gt*u+yn*y+re*o-(pn*y+ae*o+ke*u)),t[15]=se*(pn*d+oe*o+Tt*u-(Mt*u+yn*d+_e*o)),t}function qi(e,t,n){n=n||new Y(16);const r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],l=e[6],f=e[7],h=e[8],d=e[9],_=e[10],m=e[11],p=e[12],y=e[13],v=e[14],b=e[15],A=t[0],I=t[1],w=t[2],R=t[3],U=t[4],$=t[5],Z=t[6],G=t[7],H=t[8],K=t[9],Q=t[10],ne=t[11],ie=t[12],ae=t[13],re=t[14],oe=t[15];return n[0]=r*A+s*I+h*w+p*R,n[1]=o*A+u*I+d*w+y*R,n[2]=i*A+l*I+_*w+v*R,n[3]=a*A+f*I+m*w+b*R,n[4]=r*U+s*$+h*Z+p*G,n[5]=o*U+u*$+d*Z+y*G,n[6]=i*U+l*$+_*Z+v*G,n[7]=a*U+f*$+m*Z+b*G,n[8]=r*H+s*K+h*Q+p*ne,n[9]=o*H+u*K+d*Q+y*ne,n[10]=i*H+l*K+_*Q+v*ne,n[11]=a*H+f*K+m*Q+b*ne,n[12]=r*ie+s*ae+h*re+p*oe,n[13]=o*ie+u*ae+d*re+y*oe,n[14]=i*ie+l*ae+_*re+v*oe,n[15]=a*ie+f*ae+m*re+b*oe,n}function Xi(e,t,n){return n=n||xr(),e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11]),n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n}function Ji(e,t){return t=t||Me(),t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Ki(e,t,n){n=n||Me();const r=t*4;return n[0]=e[r+0],n[1]=e[r+1],n[2]=e[r+2],n}function Qi(e,t,n,r){r!==e&&(r=Ao(e,r));const o=n*4;return r[o+0]=t[0],r[o+1]=t[1],r[o+2]=t[2],r}function ea(e,t,n,r,o){o=o||new Y(16);const i=Math.tan(Math.PI*.5-.5*e),a=1/(n-r);return o[0]=i/t,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(n+r)*a,o[11]=-1,o[12]=0,o[13]=0,o[14]=n*r*a*2,o[15]=0,o}function ta(e,t,n,r,o,i,a){return a=a||new Y(16),a[0]=2/(t-e),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/(r-n),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2/(o-i),a[11]=0,a[12]=(t+e)/(e-t),a[13]=(r+n)/(n-r),a[14]=(i+o)/(o-i),a[15]=1,a}function na(e,t,n,r,o,i,a){a=a||new Y(16);const s=t-e,u=r-n,l=o-i;return a[0]=2*o/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*o/u,a[6]=0,a[7]=0,a[8]=(e+t)/s,a[9]=(r+n)/u,a[10]=i/l,a[11]=-1,a[12]=0,a[13]=0,a[14]=o*i/l,a[15]=0,a}let He,ut,Oe;function ra(e,t,n,r){return r=r||new Y(16),He=He||Me(),ut=ut||Me(),Oe=Oe||Me(),er($i(e,t,Oe),Oe),er(so(n,Oe,He),He),er(so(Oe,He,ut),ut),r[0]=He[0],r[1]=He[1],r[2]=He[2],r[3]=0,r[4]=ut[0],r[5]=ut[1],r[6]=ut[2],r[7]=0,r[8]=Oe[0],r[9]=Oe[1],r[10]=Oe[2],r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function oa(e,t){return t=t||new Y(16),t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function ia(e,t,n){n=n||new Y(16);const r=t[0],o=t[1],i=t[2],a=e[0],s=e[1],u=e[2],l=e[3],f=e[1*4+0],h=e[1*4+1],d=e[1*4+2],_=e[1*4+3],m=e[2*4+0],p=e[2*4+1],y=e[2*4+2],v=e[2*4+3],b=e[3*4+0],A=e[3*4+1],I=e[3*4+2],w=e[3*4+3];return e!==n&&(n[0]=a,n[1]=s,n[2]=u,n[3]=l,n[4]=f,n[5]=h,n[6]=d,n[7]=_,n[8]=m,n[9]=p,n[10]=y,n[11]=v),n[12]=a*r+f*o+m*i+b,n[13]=s*r+h*o+p*i+A,n[14]=u*r+d*o+y*i+I,n[15]=l*r+_*o+v*i+w,n}function aa(e,t){t=t||new Y(16);const n=Math.cos(e),r=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function sa(e,t,n){n=n||new Y(16);const r=e[4],o=e[5],i=e[6],a=e[7],s=e[8],u=e[9],l=e[10],f=e[11],h=Math.cos(t),d=Math.sin(t);return n[4]=h*r+d*s,n[5]=h*o+d*u,n[6]=h*i+d*l,n[7]=h*a+d*f,n[8]=h*s-d*r,n[9]=h*u-d*o,n[10]=h*l-d*i,n[11]=h*f-d*a,e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function ca(e,t){t=t||new Y(16);const n=Math.cos(e),r=Math.sin(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ua(e,t,n){n=n||new Y(16);const r=e[0*4+0],o=e[0*4+1],i=e[0*4+2],a=e[0*4+3],s=e[2*4+0],u=e[2*4+1],l=e[2*4+2],f=e[2*4+3],h=Math.cos(t),d=Math.sin(t);return n[0]=h*r-d*s,n[1]=h*o-d*u,n[2]=h*i-d*l,n[3]=h*a-d*f,n[8]=h*s+d*r,n[9]=h*u+d*o,n[10]=h*l+d*i,n[11]=h*f+d*a,e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function la(e,t){t=t||new Y(16);const n=Math.cos(e),r=Math.sin(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fa(e,t,n){n=n||new Y(16);const r=e[0*4+0],o=e[0*4+1],i=e[0*4+2],a=e[0*4+3],s=e[1*4+0],u=e[1*4+1],l=e[1*4+2],f=e[1*4+3],h=Math.cos(t),d=Math.sin(t);return n[0]=h*r+d*s,n[1]=h*o+d*u,n[2]=h*i+d*l,n[3]=h*a+d*f,n[4]=h*s-d*r,n[5]=h*u-d*o,n[6]=h*l-d*i,n[7]=h*f-d*a,e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function da(e,t,n){n=n||new Y(16);let r=e[0],o=e[1],i=e[2];const a=Math.sqrt(r*r+o*o+i*i);r/=a,o/=a,i/=a;const s=r*r,u=o*o,l=i*i,f=Math.cos(t),h=Math.sin(t),d=1-f;return n[0]=s+(1-s)*f,n[1]=r*o*d+i*h,n[2]=r*i*d-o*h,n[3]=0,n[4]=r*o*d-i*h,n[5]=u+(1-u)*f,n[6]=o*i*d+r*h,n[7]=0,n[8]=r*i*d+o*h,n[9]=o*i*d-r*h,n[10]=l+(1-l)*f,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function ha(e,t,n,r){r=r||new Y(16);let o=t[0],i=t[1],a=t[2];const s=Math.sqrt(o*o+i*i+a*a);o/=s,i/=s,a/=s;const u=o*o,l=i*i,f=a*a,h=Math.cos(n),d=Math.sin(n),_=1-h,m=u+(1-u)*h,p=o*i*_+a*d,y=o*a*_-i*d,v=o*i*_-a*d,b=l+(1-l)*h,A=i*a*_+o*d,I=o*a*_+i*d,w=i*a*_-o*d,R=f+(1-f)*h,U=e[0],$=e[1],Z=e[2],G=e[3],H=e[4],K=e[5],Q=e[6],ne=e[7],ie=e[8],ae=e[9],re=e[10],oe=e[11];return r[0]=m*U+p*H+y*ie,r[1]=m*$+p*K+y*ae,r[2]=m*Z+p*Q+y*re,r[3]=m*G+p*ne+y*oe,r[4]=v*U+b*H+A*ie,r[5]=v*$+b*K+A*ae,r[6]=v*Z+b*Q+A*re,r[7]=v*G+b*ne+A*oe,r[8]=I*U+w*H+R*ie,r[9]=I*$+w*K+R*ae,r[10]=I*Z+w*Q+R*re,r[11]=I*G+w*ne+R*oe,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r}function ma(e,t){return t=t||new Y(16),t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pa(e,t,n){n=n||new Y(16);const r=t[0],o=t[1],i=t[2];return n[0]=r*e[0*4+0],n[1]=r*e[0*4+1],n[2]=r*e[0*4+2],n[3]=r*e[0*4+3],n[4]=o*e[1*4+0],n[5]=o*e[1*4+1],n[6]=o*e[1*4+2],n[7]=o*e[1*4+3],n[8]=i*e[2*4+0],n[9]=i*e[2*4+1],n[10]=i*e[2*4+2],n[11]=i*e[2*4+3],e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function So(e,t,n){n=n||Me();const r=t[0],o=t[1],i=t[2],a=r*e[0*4+3]+o*e[1*4+3]+i*e[2*4+3]+e[3*4+3];return n[0]=(r*e[0*4+0]+o*e[1*4+0]+i*e[2*4+0]+e[3*4+0])/a,n[1]=(r*e[0*4+1]+o*e[1*4+1]+i*e[2*4+1]+e[3*4+1])/a,n[2]=(r*e[0*4+2]+o*e[1*4+2]+i*e[2*4+2]+e[3*4+2])/a,n}function Io(e,t,n){n=n||Me();const r=t[0],o=t[1],i=t[2];return n[0]=r*e[0*4+0]+o*e[1*4+0]+i*e[2*4+0],n[1]=r*e[0*4+1]+o*e[1*4+1]+i*e[2*4+1],n[2]=r*e[0*4+2]+o*e[1*4+2]+i*e[2*4+2],n}function ya(e,t,n){n=n||Me();const r=gr(e),o=t[0],i=t[1],a=t[2];return n[0]=o*r[0*4+0]+i*r[0*4+1]+a*r[0*4+2],n[1]=o*r[1*4+0]+i*r[1*4+1]+a*r[1*4+2],n[2]=o*r[2*4+0]+i*r[2*4+1]+a*r[2*4+2],n}var _a=Object.freeze({__proto__:null,axisRotate:ha,axisRotation:da,copy:Ao,create:Wi,frustum:na,getAxis:Ki,getTranslation:Ji,identity:xr,inverse:gr,lookAt:ra,multiply:qi,negate:Hi,ortho:ta,perspective:ea,rotateX:sa,rotateY:ua,rotateZ:fa,rotationX:aa,rotationY:ca,rotationZ:la,scale:pa,scaling:ma,setAxis:Qi,setDefaultType:Gi,setTranslation:Xi,transformDirection:Io,transformNormal:ya,transformPoint:So,translate:ia,translation:oa,transpose:Yi});const Tr=5120,Zt=5121,wr=5122,Er=5123,Ar=5124,Sr=5125,Ir=5126,va=32819,ba=32820,xa=33635,ga=5131,Ta=33640,wa=35899,Ea=35902,Aa=36269,Sa=34042,Ro={};{const e=Ro;e[Tr]=Int8Array,e[Zt]=Uint8Array,e[wr]=Int16Array,e[Er]=Uint16Array,e[Ar]=Int32Array,e[Sr]=Uint32Array,e[Ir]=Float32Array,e[va]=Uint16Array,e[ba]=Uint16Array,e[xa]=Uint16Array,e[ga]=Uint16Array,e[Ta]=Uint32Array,e[wa]=Uint32Array,e[Ea]=Uint32Array,e[Aa]=Uint32Array,e[Sa]=Uint32Array}function zn(e){if(e instanceof Int8Array)return Tr;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return Zt;if(e instanceof Int16Array)return wr;if(e instanceof Uint16Array)return Er;if(e instanceof Int32Array)return Ar;if(e instanceof Uint32Array)return Sr;if(e instanceof Float32Array)return Ir;throw new Error("unsupported typed array type")}function Co(e){if(e===Int8Array)return Tr;if(e===Uint8Array||e===Uint8ClampedArray)return Zt;if(e===Int16Array)return wr;if(e===Uint16Array)return Er;if(e===Int32Array)return Ar;if(e===Uint32Array)return Sr;if(e===Float32Array)return Ir;throw new Error("unsupported typed array type")}function No(e){const t=Ro[e];if(!t)throw new Error("unknown gl type");return t}const Gt=typeof SharedArrayBuffer<"u"?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function Ia(e,t,n){e.forEach(function(r){const o=t[r];o!==void 0&&(n[r]=o)})}function Rr(e,t){Object.keys(t).forEach(function(n){t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(t[n]=e[n])})}function Po(...e){console.error(...e)}const co=new Map;function Cr(e,t){if(!e||typeof e!="object")return!1;let n=co.get(t);n||(n=new WeakMap,co.set(t,n));let r=n.get(e);if(r===void 0){const o=Object.prototype.toString.call(e);r=o.substring(8,o.length-1)===t,n.set(e,r)}return r}function Ra(e,t){return typeof WebGLBuffer<"u"&&Cr(t,"WebGLBuffer")}function jo(e,t){return typeof WebGLTexture<"u"&&Cr(t,"WebGLTexture")}function Ca(e,t){return typeof WebGLSampler<"u"&&Cr(t,"WebGLSampler")}const ko=35044,Xe=34962,Oo=34963,Na=34660,Pa=5120,ja=5121,ka=5122,Oa=5123,Fa=5124,Ma=5125,Fo=5126,Nr={attribPrefix:""};function Ua(e){Rr(e,Nr)}function La(e,t,n,r,o){e.bindBuffer(t,n),e.bufferData(t,r,o||ko)}function Pr(e,t,n,r){if(Ra(e,t))return t;n=n||Xe;const o=e.createBuffer();return La(e,n,o,t,r),o}function Mo(e){return e==="indices"}function Ba(e){return e===Int8Array||e===Uint8Array}function jr(e){return e.length?e:e.data}const za=/coord|texture/i,Va=/color|colour/i;function Da(e,t){let n;if(za.test(e)?n=2:Va.test(e)?n=4:n=3,t%n>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${n} but ${t} values is not evenly divisible by ${n}. You should specify it.`);return n}function kr(e,t,n){return e.numComponents||e.size||Da(t,n||jr(e).length)}function Vn(e,t){if(Gt(e))return e;if(Gt(e.data))return e.data;Array.isArray(e)&&(e={data:e});let n=e.type?Or(e.type):void 0;return n||(Mo(t)?n=Uint16Array:n=Float32Array),new n(e.data)}function $a(e){return typeof e=="number"?e:e?Co(e):Fo}function Or(e){return typeof e=="number"?No(e):e||Float32Array}function Za(e,t){return{buffer:t.buffer,numValues:2*3*4,type:$a(t.type),arrayType:Or(t.type)}}function Ga(e,t){const n=t.data||t,r=Or(t.type),o=n*r.BYTES_PER_ELEMENT,i=e.createBuffer();return e.bindBuffer(Xe,i),e.bufferData(Xe,o,t.drawType||ko),{buffer:i,numValues:n,type:Co(r),arrayType:r}}function Ha(e,t,n){const r=Vn(t,n);return{arrayType:r.constructor,buffer:Pr(e,r,void 0,t.drawType),type:zn(r),numValues:0}}function Wa(e,t){const n={};return Object.keys(t).forEach(function(r){if(!Mo(r)){const o=t[r],i=o.attrib||o.name||o.attribName||Nr.attribPrefix+r;if(o.value){if(!Array.isArray(o.value)&&!Gt(o.value))throw new Error("array.value is not array or typedarray");n[i]={value:o.value}}else{let a;o.buffer&&o.buffer instanceof WebGLBuffer?a=Za:typeof o=="number"||typeof o.data=="number"?a=Ga:a=Ha;const{buffer:s,type:u,numValues:l,arrayType:f}=a(e,o,r),h=o.normalize!==void 0?o.normalize:Ba(f),d=kr(o,r,l);n[i]={buffer:s,numComponents:d,type:u,normalize:h,stride:o.stride||0,offset:o.offset||0,divisor:o.divisor===void 0?void 0:o.divisor,drawType:o.drawType}}}}),e.bindBuffer(Xe,null),n}function Ya(e,t){return t===Pa||t===ja?1:t===ka||t===Oa?2:t===Fa||t===Ma||t===Fo?4:0}const It=["position","positions","a_position"];function qa(e){let t,n;for(n=0;n<It.length&&(t=It[n],!(t in e));++n);n===It.length&&(t=Object.keys(e)[0]);const r=e[t],o=jr(r).length;if(o===void 0)return 1;const i=kr(r,t),a=o/i;if(o%i>0)throw new Error(`numComponents ${i} not correct for length ${o}`);return a}function Xa(e,t){let n,r;for(r=0;r<It.length&&(n=It[r],!(n in t||(n=Nr.attribPrefix+n,n in t)));++r);r===It.length&&(n=Object.keys(t)[0]);const o=t[n];if(!o.buffer)return 1;e.bindBuffer(Xe,o.buffer);const i=e.getBufferParameter(Xe,Na);e.bindBuffer(Xe,null);const a=Ya(e,o.type),s=i/a,u=o.numComponents||o.size,l=s/u;if(l%1!==0)throw new Error(`numComponents ${u} not correct for length ${length}`);return l}function nt(e,t,n){const r=Wa(e,t),o=Object.assign({},n||{});o.attribs=Object.assign({},n?n.attribs:{},r);const i=t.indices;if(i){const a=Vn(i,"indices");o.indices=Pr(e,a,Oo),o.numElements=a.length,o.elementType=zn(a)}else o.numElements||(o.numElements=Xa(e,o.attribs));return o}function Ja(e,t,n){const r=n==="indices"?Oo:Xe,o=Vn(t,n);return Pr(e,o,r)}function Ka(e,t){const n={};return Object.keys(t).forEach(function(r){n[r]=Ja(e,t[r],r)}),t.indices?(n.numElements=t.indices.length,n.elementType=zn(Vn(t.indices))):n.numElements=qa(t),n}const pt=jr,Qa=kr;function Uo(e,t){let n=0;return e.push=function(){for(let r=0;r<arguments.length;++r){const o=arguments[r];if(o instanceof Array||Gt(o))for(let i=0;i<o.length;++i)e[n++]=o[i];else e[n++]=o}},e.reset=function(r){n=r||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function V(e,t,n){const r=n||Float32Array;return Uo(new r(e*t),e)}function es(e){return e!=="indices"}function ts(e){const t=e.indices,n={},r=t.length;function o(i){const a=e[i],s=a.numComponents,u=V(s,r,a.constructor);for(let l=0;l<r;++l){const h=t[l]*s;for(let d=0;d<s;++d)u.push(a[h+d])}n[i]=u}return Object.keys(e).filter(es).forEach(o),n}function ns(e){if(e.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");const t=e.normal,n=t.length;for(let r=0;r<n;r+=9){const o=t[r+0],i=t[r+1],a=t[r+2],s=t[r+3],u=t[r+4],l=t[r+5],f=t[r+6],h=t[r+7],d=t[r+8];let _=o+s+f,m=i+u+h,p=a+l+d;const y=Math.sqrt(_*_+m*m+p*p);_/=y,m/=y,p/=y,t[r+0]=_,t[r+1]=m,t[r+2]=p,t[r+3]=_,t[r+4]=m,t[r+5]=p,t[r+6]=_,t[r+7]=m,t[r+8]=p}return e}function Fr(e,t,n){const r=e.length,o=new Float32Array(3);for(let i=0;i<r;i+=3)n(t,[e[i],e[i+1],e[i+2]],o),e[i]=o[0],e[i+1]=o[1],e[i+2]=o[2]}function rs(e,t,n){n=n||Me();const r=t[0],o=t[1],i=t[2];return n[0]=r*e[0*4+0]+o*e[0*4+1]+i*e[0*4+2],n[1]=r*e[1*4+0]+o*e[1*4+1]+i*e[1*4+2],n[2]=r*e[2*4+0]+o*e[2*4+1]+i*e[2*4+2],n}function Lo(e,t){return Fr(e,t,Io),e}function Bo(e,t){return Fr(e,gr(t),rs),e}function zo(e,t){return Fr(e,t,So),e}function Vo(e,t){return Object.keys(e).forEach(function(n){const r=e[n];n.indexOf("pos")>=0?zo(r,t):n.indexOf("tan")>=0||n.indexOf("binorm")>=0?Lo(r,t):n.indexOf("norm")>=0&&Bo(r,t)}),e}function Mr(e,t,n){return e=e||2,t=t||0,n=n||0,e*=.5,{position:{numComponents:2,data:[t+-1*e,n+-1*e,t+1*e,n+-1*e,t+-1*e,n+1*e,t+1*e,n+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function Ur(e,t,n,r,o){e=e||1,t=t||1,n=n||1,r=r||1,o=o||xr();const i=(n+1)*(r+1),a=V(3,i),s=V(3,i),u=V(2,i);for(let d=0;d<=r;d++)for(let _=0;_<=n;_++){const m=_/n,p=d/r;a.push(e*m-e*.5,0,t*p-t*.5),s.push(0,1,0),u.push(m,p)}const l=n+1,f=V(3,n*r*2,Uint16Array);for(let d=0;d<r;d++)for(let _=0;_<n;_++)f.push((d+0)*l+_,(d+1)*l+_,(d+0)*l+_+1),f.push((d+1)*l+_,(d+1)*l+_+1,(d+0)*l+_+1);return Vo({position:a,normal:s,texcoord:u,indices:f},o)}function Lr(e,t,n,r,o,i,a){if(t<=0||n<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");r=r||0,o=o||Math.PI,i=i||0,a=a||Math.PI*2;const s=o-r,u=a-i,l=(t+1)*(n+1),f=V(3,l),h=V(3,l),d=V(2,l);for(let p=0;p<=n;p++)for(let y=0;y<=t;y++){const v=y/t,b=p/n,A=u*v+i,I=s*b+r,w=Math.sin(A),R=Math.cos(A),U=Math.sin(I),$=Math.cos(I),Z=R*U,G=$,H=w*U;f.push(e*Z,e*G,e*H),h.push(Z,G,H),d.push(1-v,b)}const _=t+1,m=V(3,t*n*2,Uint16Array);for(let p=0;p<t;p++)for(let y=0;y<n;y++)m.push((y+0)*_+p,(y+0)*_+p+1,(y+1)*_+p),m.push((y+1)*_+p,(y+0)*_+p+1,(y+1)*_+p+1);return{position:f,normal:h,texcoord:d,indices:m}}const os=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function Br(e){e=e||1;const t=e/2,n=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],r=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],i=6*4,a=V(3,i),s=V(3,i),u=V(2,i),l=V(3,6*2,Uint16Array);for(let f=0;f<6;++f){const h=os[f];for(let _=0;_<4;++_){const m=n[h[_]],p=r[f],y=o[_];a.push(m),s.push(p),u.push(y)}const d=4*f;l.push(d+0,d+1,d+2),l.push(d+0,d+2,d+3)}return{position:a,normal:s,texcoord:u,indices:l}}function Dn(e,t,n,r,o,i,a){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(o<1)throw new Error("verticalSubdivisions must be 1 or greater");const s=i===void 0?!0:i,u=a===void 0?!0:a,l=(s?2:0)+(u?2:0),f=(r+1)*(o+1+l),h=V(3,f),d=V(3,f),_=V(2,f),m=V(3,r*(o+l/2)*2,Uint16Array),p=r+1,y=Math.atan2(e-t,n),v=Math.cos(y),b=Math.sin(y),A=s?-2:0,I=o+(u?2:0);for(let w=A;w<=I;++w){let R=w/o,U=n*R,$;w<0?(U=0,R=1,$=e):w>o?(U=n,R=1,$=t):$=e+(t-e)*(w/o),(w===-2||w===o+2)&&($=0,R=0),U-=n/2;for(let Z=0;Z<p;++Z){const G=Math.sin(Z*Math.PI*2/r),H=Math.cos(Z*Math.PI*2/r);h.push(G*$,U,H*$),w<0?d.push(0,-1,0):w>o?d.push(0,1,0):$===0?d.push(0,0,0):d.push(G*v,b,H*v),_.push(Z/r,1-R)}}for(let w=0;w<o+l;++w)if(!(w===1&&s||w===o+l-2&&u))for(let R=0;R<r;++R)m.push(p*(w+0)+0+R,p*(w+0)+1+R,p*(w+1)+1+R),m.push(p*(w+0)+0+R,p*(w+1)+1+R,p*(w+1)+0+R);return{position:h,normal:d,texcoord:_,indices:m}}function uo(e,t){t=t||[];const n=[];for(let r=0;r<e.length;r+=4){const o=e[r],i=e.slice(r+1,r+4);i.push.apply(i,t);for(let a=0;a<o;++a)n.push.apply(n,i)}return n}function zr(){const e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],n=uo([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=uo([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),o=e.length/3,i={position:V(3,o),texcoord:V(2,o),normal:V(3,o),color:V(4,o,Uint8Array),indices:V(3,o/3,Uint16Array)};i.position.push(e),i.texcoord.push(t),i.normal.push(n),i.color.push(r);for(let a=0;a<o;++a)i.indices.push(a);return i}function $n(e,t,n,r,o,i,a){if(o<=0)throw new Error("subdivisionDown must be > 0");i=i||0,a=a||1;const s=2,u=a-i,l=(o+1)*2*(2+s),f=V(3,l),h=V(3,l),d=V(2,l);function _(b,A,I){return b+(A-b)*I}function m(b,A,I,w,R,U){for(let $=0;$<=o;$++){const Z=A/(s-1),G=$/o,H=(Z-.5)*2,K=(i+G*u)*Math.PI,Q=Math.sin(K),ne=Math.cos(K),ie=_(e,b,Q),ae=H*r,re=ne*e,oe=Q*ie;f.push(ae,re,oe);const _e=Di(Zi([0,Q,ne],I),w);h.push(_e),d.push(Z*R+U,G)}}for(let b=0;b<s;b++){const A=(b/(s-1)-.5)*2;m(t,b,[1,1,1],[0,0,0],1,0),m(t,b,[0,0,0],[A,0,0],0,0),m(n,b,[1,1,1],[0,0,0],1,0),m(n,b,[0,0,0],[A,0,0],0,1)}const p=V(3,o*2*(2+s),Uint16Array);function y(b,A){for(let I=0;I<o;++I)p.push(b+I+0,b+I+1,A+I+0),p.push(b+I+1,A+I+1,A+I+0)}const v=o+1;return y(v*0,v*4),y(v*5,v*7),y(v*6,v*2),y(v*3,v*1),{position:f,normal:h,texcoord:d,indices:p}}function Vr(e,t,n,r,o,i){return Dn(e,e,t,n,r,o,i)}function Dr(e,t,n,r,o,i){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(r<3)throw new Error("verticalSubdivisions must be 3 or greater");o=o||0,i=i||Math.PI*2;const a=i-o,s=n+1,u=r+1,l=s*u,f=V(3,l),h=V(3,l),d=V(2,l),_=V(3,n*r*2,Uint16Array);for(let m=0;m<u;++m){const p=m/r,y=p*Math.PI*2,v=Math.sin(y),b=e+v*t,A=Math.cos(y),I=A*t;for(let w=0;w<s;++w){const R=w/n,U=o+R*a,$=Math.sin(U),Z=Math.cos(U),G=$*b,H=Z*b,K=$*v,Q=Z*v;f.push(G,I,H),h.push(K,A,Q),d.push(R,1-p)}}for(let m=0;m<r;++m)for(let p=0;p<n;++p){const y=1+p,v=1+m;_.push(s*m+p,s*v+p,s*m+y),_.push(s*v+p,s*v+y,s*m+y)}return{position:f,normal:h,texcoord:d,indices:_}}function $r(e,t,n,r,o){if(t<3)throw new Error("divisions must be at least 3");n=n||1,o=o||1,r=r||0;const i=(t+1)*(n+1),a=V(3,i),s=V(3,i),u=V(2,i),l=V(3,n*t*2,Uint16Array);let f=0;const h=e-r,d=t+1;for(let _=0;_<=n;++_){const m=r+h*Math.pow(_/n,o);for(let p=0;p<=t;++p){const y=2*Math.PI*p/t,v=m*Math.cos(y),b=m*Math.sin(y);if(a.push(v,0,b),s.push(0,1,0),u.push(1-p/t,_/n),_>0&&p!==t){const A=f+(p+1),I=f+p,w=f+p-d,R=f+(p+1)-d;l.push(A,I,w),l.push(A,w,R)}}f+=t+1}return{position:a,normal:s,texcoord:u,indices:l}}function is(e){return Math.random()*e|0}function as(e,t){t=t||{};const n=e.position.numElements,r=V(4,n,Uint8Array),o=t.rand||function(i,a){return a<3?is(256):255};if(e.color=r,e.indices)for(let i=0;i<n;++i)r.push(o(i,0),o(i,1),o(i,2),o(i,3));else{const i=t.vertsPerColor||3,a=n/i;for(let s=0;s<a;++s){const u=[o(s,0),o(s,1),o(s,2),o(s,3)];for(let l=0;l<i;++l)r.push(u)}}return e}function Ce(e){return function(t){const n=e.apply(this,Array.prototype.slice.call(arguments,1));return Ka(t,n)}}function Ne(e){return function(t){const n=e.apply(null,Array.prototype.slice.call(arguments,1));return nt(t,n)}}const ss=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function ir(e,t,n,r){r=r||0;const o=e.length;for(let i=0;i<o;++i)t[n+i]=e[i]+r}function Do(e,t){const n=pt(e),r=new n.constructor(t);let o=r;return n.numComponents&&n.numElements&&Uo(r,n.numComponents),e.data&&(o={data:r},Ia(ss,e,o)),o}function cs(e){const t={};let n;for(let s=0;s<e.length;++s){const u=e[s];Object.keys(u).forEach(function(l){t[l]||(t[l]=[]),!n&&l!=="indices"&&(n=l);const f=u[l],h=Qa(f,l),_=pt(f).length/h;t[l].push(_)})}function r(s){let u=0,l;for(let f=0;f<e.length;++f){const d=e[f][s],_=pt(d);u+=_.length,(!l||d.data)&&(l=d)}return{length:u,spec:l}}function o(s,u,l){let f=0,h=0;for(let d=0;d<e.length;++d){const m=e[d][s],p=pt(m);s==="indices"?(ir(p,l,h,f),f+=u[d]):ir(p,l,h),h+=p.length}}const i=t[n],a={};return Object.keys(t).forEach(function(s){const u=r(s),l=Do(u.spec,u.length);o(s,i,pt(l)),a[s]=l}),a}function us(e){const t={};return Object.keys(e).forEach(function(n){const r=e[n],o=pt(r),i=Do(r,o.length);ir(o,pt(i),0),t[n]=i}),t}const ls=Ne(zr),fs=Ce(zr),ds=Ne(Br),hs=Ce(Br),ms=Ne(Ur),ps=Ce(Ur),ys=Ne(Lr),_s=Ce(Lr),vs=Ne(Dn),bs=Ce(Dn),xs=Ne(Mr),gs=Ce(Mr),$o=Ne($n),Zo=Ce($n),Ts=Ne(Vr),ws=Ce(Vr),Es=Ne(Dr),As=Ce(Dr),Ss=Ne($r),Is=Ce($r),Rs=$o,Cs=Zo,Ns=$n;var Nt=Object.freeze({__proto__:null,create3DFBufferInfo:ls,create3DFBuffers:fs,create3DFVertices:zr,createAugmentedTypedArray:V,createCubeBufferInfo:ds,createCubeBuffers:hs,createCubeVertices:Br,createPlaneBufferInfo:ms,createPlaneBuffers:ps,createPlaneVertices:Ur,createSphereBufferInfo:ys,createSphereBuffers:_s,createSphereVertices:Lr,createTruncatedConeBufferInfo:vs,createTruncatedConeBuffers:bs,createTruncatedConeVertices:Dn,createXYQuadBufferInfo:xs,createXYQuadBuffers:gs,createXYQuadVertices:Mr,createCresentBufferInfo:Rs,createCresentBuffers:Cs,createCresentVertices:Ns,createCrescentBufferInfo:$o,createCrescentBuffers:Zo,createCrescentVertices:$n,createCylinderBufferInfo:Ts,createCylinderBuffers:ws,createCylinderVertices:Vr,createTorusBufferInfo:Es,createTorusBuffers:As,createTorusVertices:Dr,createDiscBufferInfo:Ss,createDiscBuffers:Is,createDiscVertices:$r,deindexVertices:ts,flattenNormals:ns,makeRandomVertexColors:as,reorientDirections:Lo,reorientNormals:Bo,reorientPositions:zo,reorientVertices:Vo,concatVertices:cs,duplicateVertices:us});function ln(e){return!!e.texStorage2D}const Go=function(){const e={},t={};function n(r){const o=r.constructor.name;if(!e[o]){for(const i in r)if(typeof r[i]=="number"){const a=t[r[i]];t[r[i]]=a?`${a} | ${i}`:i}e[o]=!0}}return function(o,i){return n(o),t[i]||(typeof i=="number"?`0x${i.toString(16)}`:i)}}(),Pe={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},Ht=Gt,Ho=function(){let e;return function(){return e=e||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}}(),ar=6406,ve=6407,W=6408,sr=6409,cr=6410,Et=6402,ur=34041,Sn=33071,Ps=9728,js=9729,rt=3553,Je=34067,_t=32879,vt=35866,Zr=34069,ks=34070,Os=34071,Fs=34072,Ms=34073,Us=34074,lr=10241,fr=10240,In=10242,Rn=10243,lo=32882,Ls=33082,Bs=33083,zs=33084,Vs=33085,Ds=34892,$s=34893,Gr=3317,Wo=3314,Yo=32878,qo=3316,Xo=3315,Jo=32877,Zs=37443,Gs=37441,Hs=37440,Ws=33321,Ys=36756,qs=33325,Xs=33326,Js=33330,Ks=33329,Qs=33338,ec=33337,tc=33340,nc=33339,rc=33323,oc=36757,ic=33327,ac=33328,sc=33336,cc=33335,uc=33332,lc=33331,fc=33334,dc=33333,hc=32849,mc=35905,pc=36194,yc=36758,_c=35898,vc=35901,bc=34843,xc=34837,gc=36221,Tc=36239,wc=36215,Ec=36233,Ac=36209,Sc=36227,Ic=32856,Rc=35907,Cc=36759,Nc=32855,Pc=32854,jc=32857,kc=34842,Oc=34836,Fc=36220,Mc=36238,Uc=36975,Lc=36214,Bc=36232,zc=36226,Vc=36208,Dc=33189,$c=33190,Zc=36012,Gc=36013,Hc=35056,We=5120,q=5121,_n=5122,wt=5123,vn=5124,lt=5125,ce=5126,fo=32819,ho=32820,mo=33635,xe=5131,Ut=36193,tr=33640,Wc=35899,Yc=35902,qc=36269,Xc=34042,Lt=33319,ft=33320,Bt=6403,dt=36244,ht=36248,Ye=36249,Jc={};{const e=Jc;e[ar]={numColorComponents:1},e[sr]={numColorComponents:1},e[cr]={numColorComponents:2},e[ve]={numColorComponents:3},e[W]={numColorComponents:4},e[Bt]={numColorComponents:1},e[dt]={numColorComponents:1},e[Lt]={numColorComponents:2},e[ft]={numColorComponents:2},e[ve]={numColorComponents:3},e[ht]={numColorComponents:3},e[W]={numColorComponents:4},e[Ye]={numColorComponents:4},e[Et]={numColorComponents:1},e[ur]={numColorComponents:2}}let nr;function Zn(e){if(!nr){const t={};t[ar]={textureFormat:ar,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[q,xe,Ut,ce]},t[sr]={textureFormat:sr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[q,xe,Ut,ce]},t[cr]={textureFormat:cr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[q,xe,Ut,ce]},t[ve]={textureFormat:ve,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[q,xe,Ut,ce,mo]},t[W]={textureFormat:W,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[q,xe,Ut,ce,fo,ho]},t[Et]={textureFormat:Et,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[lt,wt]},t[Ws]={textureFormat:Bt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[q]},t[Ys]={textureFormat:Bt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[We]},t[qs]={textureFormat:Bt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[ce,xe]},t[Xs]={textureFormat:Bt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[ce]},t[Js]={textureFormat:dt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[q]},t[Ks]={textureFormat:dt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[We]},t[uc]={textureFormat:dt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[wt]},t[lc]={textureFormat:dt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[_n]},t[fc]={textureFormat:dt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[lt]},t[dc]={textureFormat:dt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[vn]},t[rc]={textureFormat:Lt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[q]},t[oc]={textureFormat:Lt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[We]},t[ic]={textureFormat:Lt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[ce,xe]},t[ac]={textureFormat:Lt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[ce]},t[sc]={textureFormat:ft,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[q]},t[cc]={textureFormat:ft,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[We]},t[Qs]={textureFormat:ft,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[wt]},t[ec]={textureFormat:ft,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[_n]},t[tc]={textureFormat:ft,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[lt]},t[nc]={textureFormat:ft,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[vn]},t[hc]={textureFormat:ve,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[q]},t[mc]={textureFormat:ve,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[q]},t[pc]={textureFormat:ve,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[q,mo]},t[yc]={textureFormat:ve,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[We]},t[_c]={textureFormat:ve,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[ce,xe,Wc]},t[vc]={textureFormat:ve,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[ce,xe,Yc]},t[bc]={textureFormat:ve,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[ce,xe]},t[xc]={textureFormat:ve,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[ce]},t[gc]={textureFormat:ht,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[q]},t[Tc]={textureFormat:ht,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[We]},t[wc]={textureFormat:ht,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[wt]},t[Ec]={textureFormat:ht,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[_n]},t[Ac]={textureFormat:ht,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[lt]},t[Sc]={textureFormat:ht,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[vn]},t[Ic]={textureFormat:W,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[q]},t[Rc]={textureFormat:W,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[q]},t[Cc]={textureFormat:W,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[We]},t[Nc]={textureFormat:W,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[q,ho,tr]},t[Pc]={textureFormat:W,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[q,fo]},t[jc]={textureFormat:W,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[tr]},t[kc]={textureFormat:W,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[ce,xe]},t[Oc]={textureFormat:W,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[ce]},t[Fc]={textureFormat:Ye,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[q]},t[Mc]={textureFormat:Ye,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[We]},t[Uc]={textureFormat:Ye,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[tr]},t[Lc]={textureFormat:Ye,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[wt]},t[Bc]={textureFormat:Ye,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[_n]},t[zc]={textureFormat:Ye,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[vn]},t[Vc]={textureFormat:Ye,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[lt]},t[Dc]={textureFormat:Et,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[wt,lt]},t[$c]={textureFormat:Et,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[lt]},t[Zc]={textureFormat:Et,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ce]},t[Hc]={textureFormat:ur,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Xc]},t[Gc]={textureFormat:ur,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[qc]},Object.keys(t).forEach(function(n){const r=t[n];r.bytesPerElementMap={},r.bytesPerElement.forEach(function(o,i){const a=r.type[i];r.bytesPerElementMap[a]=o})}),nr=t}return nr[e]}function Kc(e,t){const n=Zn(e);if(!n)throw"unknown internal format";const r=n.bytesPerElementMap[t];if(r===void 0)throw"unknown internal format";return r}function fn(e){const t=Zn(e);if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function po(e){return(e&e-1)===0}function Qc(e,t,n,r){if(!ln(e))return po(t)&&po(n);const o=Zn(r);if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function eu(e){const t=Zn(e);if(!t)throw"unknown internal format";return t.textureFilterable}function tu(e,t,n){return Ht(t)?zn(t):n||q}function bn(e,t,n,r,o){if(o%1!==0)throw"can't guess dimensions";if(!n&&!r){const i=Math.sqrt(o/(t===Je?6:1));i%1===0?(n=i,r=i):(n=o,r=1)}else if(r){if(!n&&(n=o/r,n%1))throw"can't guess dimensions"}else if(r=o/n,r%1)throw"can't guess dimensions";return{width:n,height:r}}function nu(e){Pe.textureColor=new Uint8Array([e[0]*255,e[1]*255,e[2]*255,e[3]*255])}function ru(e){Rr(e,Pe),e.textureColor&&nu(e.textureColor)}function Pt(e,t){t.colorspaceConversion!==void 0&&e.pixelStorei(Zs,t.colorspaceConversion),t.premultiplyAlpha!==void 0&&e.pixelStorei(Gs,t.premultiplyAlpha),t.flipY!==void 0&&e.pixelStorei(Hs,t.flipY)}function Ko(e){e.pixelStorei(Gr,4),ln(e)&&(e.pixelStorei(Wo,0),e.pixelStorei(Yo,0),e.pixelStorei(qo,0),e.pixelStorei(Xo,0),e.pixelStorei(Jo,0))}function ou(e,t,n,r){r.minMag&&(n.call(e,t,lr,r.minMag),n.call(e,t,fr,r.minMag)),r.min&&n.call(e,t,lr,r.min),r.mag&&n.call(e,t,fr,r.mag),r.wrap&&(n.call(e,t,In,r.wrap),n.call(e,t,Rn,r.wrap),(t===_t||Ca(e,t))&&n.call(e,t,lo,r.wrap)),r.wrapR&&n.call(e,t,lo,r.wrapR),r.wrapS&&n.call(e,t,In,r.wrapS),r.wrapT&&n.call(e,t,Rn,r.wrapT),r.minLod!==void 0&&n.call(e,t,Ls,r.minLod),r.maxLod!==void 0&&n.call(e,t,Bs,r.maxLod),r.baseLevel!==void 0&&n.call(e,t,zs,r.baseLevel),r.maxLevel!==void 0&&n.call(e,t,Vs,r.maxLevel),r.compareFunc!==void 0&&n.call(e,t,$s,r.compareFunc),r.compareMode!==void 0&&n.call(e,t,Ds,r.compareMode)}function Qo(e,t,n){const r=n.target||rt;e.bindTexture(r,t),ou(e,r,e.texParameteri,n)}function iu(e){return e=e||Pe.textureColor,Ht(e)?e:new Uint8Array([e[0]*255,e[1]*255,e[2]*255,e[3]*255])}function dr(e,t,n,r,o,i){n=n||Pe.textureOptions,i=i||W;const a=n.target||rt;if(r=r||n.width,o=o||n.height,e.bindTexture(a,t),Qc(e,r,o,i))e.generateMipmap(a);else{const s=eu(i)?js:Ps;e.texParameteri(a,lr,s),e.texParameteri(a,fr,s),e.texParameteri(a,In,Sn),e.texParameteri(a,Rn,Sn)}}function Wt(e){return e.auto===!0||e.auto===void 0&&e.level===void 0}function hr(e,t){return t=t||{},t.cubeFaceOrder||[Zr,ks,Os,Fs,Ms,Us]}function mr(e,t){const r=hr(e,t).map(function(o,i){return{face:o,ndx:i}});return r.sort(function(o,i){return o.face-i.face}),r}function ei(e,t,n,r){r=r||Pe.textureOptions;const o=r.target||rt,i=r.level||0;let a=n.width,s=n.height;const u=r.internalFormat||r.format||W,l=fn(u),f=r.format||l.format,h=r.type||l.type;if(Pt(e,r),e.bindTexture(o,t),o===Je){const d=n.width,_=n.height;let m,p;if(d/6===_)m=_,p=[0,0,1,0,2,0,3,0,4,0,5,0];else if(_/6===d)m=d,p=[0,0,0,1,0,2,0,3,0,4,0,5];else if(d/3===_/2)m=d/3,p=[0,0,1,0,2,0,0,1,1,1,2,1];else if(d/2===_/3)m=d/2,p=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);const y=Ho();y?(y.canvas.width=m,y.canvas.height=m,a=m,s=m,mr(e,r).forEach(function(v){const b=p[v.ndx*2+0]*m,A=p[v.ndx*2+1]*m;y.drawImage(n,b,A,m,m,0,0,m,m),e.texImage2D(v.face,i,u,f,h,y.canvas)}),y.canvas.width=1,y.canvas.height=1):typeof createImageBitmap<"u"&&(a=m,s=m,mr(e,r).forEach(function(v){const b=p[v.ndx*2+0]*m,A=p[v.ndx*2+1]*m;e.texImage2D(v.face,i,u,m,m,0,f,h,null),createImageBitmap(n,b,A,m,m,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(I){Pt(e,r),e.bindTexture(o,t),e.texImage2D(v.face,i,u,f,h,I),Wt(r)&&dr(e,t,r,a,s,u)})}))}else if(o===_t||o===vt){const d=Math.min(n.width,n.height),_=Math.max(n.width,n.height),m=_/d;if(m%1!==0)throw"can not compute 3D dimensions of element";const p=n.width===_?1:0,y=n.height===_?1:0;e.pixelStorei(Gr,1),e.pixelStorei(Wo,n.width),e.pixelStorei(Yo,0),e.pixelStorei(Jo,0),e.texImage3D(o,i,u,d,d,d,0,f,h,null);for(let v=0;v<m;++v){const b=v*d*p,A=v*d*y;e.pixelStorei(qo,b),e.pixelStorei(Xo,A),e.texSubImage3D(o,i,0,0,v,d,d,1,f,h,n)}Ko(e)}else e.texImage2D(o,i,u,f,h,n);Wt(r)&&dr(e,t,r,a,s,u),Qo(e,t,r)}function dn(){}function au(e){if(typeof document<"u"){const t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}else{const t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}function su(e,t){return t===void 0&&!au(e)?"anonymous":t}function cu(e,t,n){n=n||dn;let r;if(t=t!==void 0?t:Pe.crossOrigin,t=su(e,t),typeof Image<"u"){r=new Image,t!==void 0&&(r.crossOrigin=t);const o=function(){r.removeEventListener("error",i),r.removeEventListener("load",a),r=null},i=function(){const u="couldn't load image: "+e;Po(u),n(u,r),o()},a=function(){n(null,r),o()};return r.addEventListener("error",i),r.addEventListener("load",a),r.src=e,r}else if(typeof ImageBitmap<"u"){let o,i;const a=function(){n(o,i)},s={};t&&(s.mode="cors"),fetch(e,s).then(function(u){if(!u.ok)throw u;return u.blob()}).then(function(u){return createImageBitmap(u,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(u){i=u,setTimeout(a)}).catch(function(u){o=u,setTimeout(a)}),r=null}return r}function ti(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof ImageData<"u"&&e instanceof ImageData||typeof HTMLElement<"u"&&e instanceof HTMLElement}function Hr(e,t,n){return ti(e)?(setTimeout(function(){n(null,e)}),e):cu(e,t,n)}function Wr(e,t,n){n=n||Pe.textureOptions;const r=n.target||rt;if(e.bindTexture(r,t),n.color===!1)return;const o=iu(n.color);if(r===Je)for(let i=0;i<6;++i)e.texImage2D(Zr+i,0,W,1,1,0,W,q,o);else r===_t||r===vt?e.texImage3D(r,0,W,1,1,1,0,W,q,o):e.texImage2D(r,0,W,1,1,0,W,q,o)}function uu(e,t,n,r){return r=r||dn,n=n||Pe.textureOptions,Wr(e,t,n),n=Object.assign({},n),Hr(n.src,n.crossOrigin,function(i,a){i?r(i,t,a):(ei(e,t,a,n),r(null,t,a))})}function lu(e,t,n,r){r=r||dn;const o=n.src;if(o.length!==6)throw"there must be 6 urls for a cubemap";const i=n.level||0,a=n.internalFormat||n.format||W,s=fn(a),u=n.format||s.format,l=n.type||q,f=n.target||rt;if(f!==Je)throw"target must be TEXTURE_CUBE_MAP";Wr(e,t,n),n=Object.assign({},n);let h=6;const d=[],_=hr(e,n);let m;function p(y){return function(v,b){--h,v?d.push(v):b.width!==b.height?d.push("cubemap face img is not a square: "+b.src):(Pt(e,n),e.bindTexture(f,t),h===5?hr().forEach(function(A){e.texImage2D(A,i,a,u,l,b)}):e.texImage2D(y,i,a,u,l,b),Wt(n)&&e.generateMipmap(f)),h===0&&r(d.length?d:void 0,t,m)}}m=o.map(function(y,v){return Hr(y,n.crossOrigin,p(_[v]))})}function fu(e,t,n,r){r=r||dn;const o=n.src,i=n.internalFormat||n.format||W,a=fn(i),s=n.format||a.format,u=n.type||q,l=n.target||vt;if(l!==_t&&l!==vt)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";Wr(e,t,n),n=Object.assign({},n);let f=o.length;const h=[];let d;const _=n.level||0;let m=n.width,p=n.height;const y=o.length;let v=!0;function b(A){return function(I,w){if(--f,I)h.push(I);else{if(Pt(e,n),e.bindTexture(l,t),v){v=!1,m=n.width||w.width,p=n.height||w.height,e.texImage3D(l,_,i,m,p,y,0,s,u,null);for(let R=0;R<y;++R)e.texSubImage3D(l,_,0,0,R,m,p,1,s,u,w)}else{let R=w,U;(w.width!==m||w.height!==p)&&(U=Ho(),R=U.canvas,U.canvas.width=m,U.canvas.height=p,U.drawImage(w,0,0,m,p)),e.texSubImage3D(l,_,0,0,A,m,p,1,s,u,R),U&&R===U.canvas&&(U.canvas.width=0,U.canvas.height=0)}Wt(n)&&e.generateMipmap(l)}f===0&&r(h.length?h:void 0,t,d)}}d=o.map(function(A,I){return Hr(A,n.crossOrigin,b(I))})}function du(e,t,n,r){r=r||Pe.textureOptions;const o=r.target||rt;e.bindTexture(o,t);let i=r.width,a=r.height,s=r.depth;const u=r.level||0,l=r.internalFormat||r.format||W,f=fn(l),h=r.format||f.format,d=r.type||tu(e,n,f.type);if(Ht(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{const y=No(d);n=new y(n)}const _=Kc(l,d),m=n.byteLength/_;if(m%1)throw"length wrong size for format: "+Go(e,h);let p;if(o===_t||o===vt)if(!i&&!a&&!s){const y=Math.cbrt(m);if(y%1!==0)throw"can't guess cube size of array of numElements: "+m;i=y,a=y,s=y}else i&&(!a||!s)?(p=bn(e,o,a,s,m/i),a=p.width,s=p.height):a&&(!i||!s)?(p=bn(e,o,i,s,m/a),i=p.width,s=p.height):(p=bn(e,o,i,a,m/s),i=p.width,a=p.height);else p=bn(e,o,i,a,m),i=p.width,a=p.height;if(Ko(e),e.pixelStorei(Gr,r.unpackAlignment||1),Pt(e,r),o===Je){const y=_/n.BYTES_PER_ELEMENT,v=m/6*y;mr(e,r).forEach(b=>{const A=v*b.ndx,I=n.subarray(A,A+v);e.texImage2D(b.face,u,l,i,a,0,h,d,I)})}else o===_t||o===vt?e.texImage3D(o,u,l,i,a,s,0,h,d,n):e.texImage2D(o,u,l,i,a,0,h,d,n);return{width:i,height:a,depth:s,type:d}}function hu(e,t,n){const r=n.target||rt;e.bindTexture(r,t);const o=n.level||0,i=n.internalFormat||n.format||W,a=fn(i),s=n.format||a.format,u=n.type||a.type;if(Pt(e,n),r===Je)for(let l=0;l<6;++l)e.texImage2D(Zr+l,o,i,n.width,n.height,0,s,u,null);else r===_t||r===vt?e.texImage3D(r,o,i,n.width,n.height,n.depth,0,s,u,null):e.texImage2D(r,o,i,n.width,n.height,0,s,u,null)}function Ue(e,t,n){n=n||dn,t=t||Pe.textureOptions;const r=e.createTexture(),o=t.target||rt;let i=t.width||1,a=t.height||1;const s=t.internalFormat||W;e.bindTexture(o,r),o===Je&&(e.texParameteri(o,In,Sn),e.texParameteri(o,Rn,Sn));let u=t.src;if(u)if(typeof u=="function"&&(u=u(e,t)),typeof u=="string")uu(e,r,t,n);else if(Ht(u)||Array.isArray(u)&&(typeof u[0]=="number"||Array.isArray(u[0])||Ht(u[0]))){const l=du(e,r,u,t);i=l.width,a=l.height}else Array.isArray(u)&&(typeof u[0]=="string"||ti(u[0]))?o===Je?lu(e,r,t,n):fu(e,r,t,n):(ei(e,r,u,t),i=u.width,a=u.height);else hu(e,r,t);return Wt(t)&&dr(e,r,t,i,a,s),Qo(e,r,t),r}const Yr=Po;function ni(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}const Cn=33984,Gn=34962,mu=34963,pu=35713,yu=35714,_u=35632,vu=35633,bu=35981,ri=35718,xu=35721,gu=35971,Tu=35382,wu=35396,Eu=35398,Au=35392,Su=35395,Hn=5126,oi=35664,ii=35665,ai=35666,qr=5124,si=35667,ci=35668,ui=35669,li=35670,fi=35671,di=35672,hi=35673,mi=35674,pi=35675,yi=35676,Iu=35678,Ru=35680,Cu=35679,Nu=35682,Pu=35685,ju=35686,ku=35687,Ou=35688,Fu=35689,Mu=35690,Uu=36289,Lu=36292,Bu=36293,Xr=5125,_i=36294,vi=36295,bi=36296,zu=36298,Vu=36299,Du=36300,$u=36303,Zu=36306,Gu=36307,Hu=36308,Wu=36311,Wn=3553,Yn=34067,Jr=32879,qn=35866,F={};function xi(e,t){return F[t].bindPoint}function Yu(e,t){return function(n){e.uniform1f(t,n)}}function qu(e,t){return function(n){e.uniform1fv(t,n)}}function Xu(e,t){return function(n){e.uniform2fv(t,n)}}function Ju(e,t){return function(n){e.uniform3fv(t,n)}}function Ku(e,t){return function(n){e.uniform4fv(t,n)}}function gi(e,t){return function(n){e.uniform1i(t,n)}}function Ti(e,t){return function(n){e.uniform1iv(t,n)}}function wi(e,t){return function(n){e.uniform2iv(t,n)}}function Ei(e,t){return function(n){e.uniform3iv(t,n)}}function Ai(e,t){return function(n){e.uniform4iv(t,n)}}function Qu(e,t){return function(n){e.uniform1ui(t,n)}}function el(e,t){return function(n){e.uniform1uiv(t,n)}}function tl(e,t){return function(n){e.uniform2uiv(t,n)}}function nl(e,t){return function(n){e.uniform3uiv(t,n)}}function rl(e,t){return function(n){e.uniform4uiv(t,n)}}function ol(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}function il(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}function al(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}function sl(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}function cl(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}function ul(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}function ll(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}function fl(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}function dl(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}function de(e,t,n,r){const o=xi(e,t);return ln(e)?function(i){let a,s;!i||jo(e,i)?(a=i,s=null):(a=i.texture,s=i.sampler),e.uniform1i(r,n),e.activeTexture(Cn+n),e.bindTexture(o,a),e.bindSampler(n,s)}:function(i){e.uniform1i(r,n),e.activeTexture(Cn+n),e.bindTexture(o,i)}}function he(e,t,n,r,o){const i=xi(e,t),a=new Int32Array(o);for(let s=0;s<o;++s)a[s]=n+s;return ln(e)?function(s){e.uniform1iv(r,a),s.forEach(function(u,l){e.activeTexture(Cn+a[l]);let f,h;!u||jo(e,u)?(f=u,h=null):(f=u.texture,h=u.sampler),e.bindSampler(n,h),e.bindTexture(i,f)})}:function(s){e.uniform1iv(r,a),s.forEach(function(u,l){e.activeTexture(Cn+a[l]),e.bindTexture(i,u)})}}F[Hn]={Type:Float32Array,size:4,setter:Yu,arraySetter:qu};F[oi]={Type:Float32Array,size:8,setter:Xu,cols:2};F[ii]={Type:Float32Array,size:12,setter:Ju,cols:3};F[ai]={Type:Float32Array,size:16,setter:Ku,cols:4};F[qr]={Type:Int32Array,size:4,setter:gi,arraySetter:Ti};F[si]={Type:Int32Array,size:8,setter:wi,cols:2};F[ci]={Type:Int32Array,size:12,setter:Ei,cols:3};F[ui]={Type:Int32Array,size:16,setter:Ai,cols:4};F[Xr]={Type:Uint32Array,size:4,setter:Qu,arraySetter:el};F[_i]={Type:Uint32Array,size:8,setter:tl,cols:2};F[vi]={Type:Uint32Array,size:12,setter:nl,cols:3};F[bi]={Type:Uint32Array,size:16,setter:rl,cols:4};F[li]={Type:Uint32Array,size:4,setter:gi,arraySetter:Ti};F[fi]={Type:Uint32Array,size:8,setter:wi,cols:2};F[di]={Type:Uint32Array,size:12,setter:Ei,cols:3};F[hi]={Type:Uint32Array,size:16,setter:Ai,cols:4};F[mi]={Type:Float32Array,size:32,setter:ol,rows:2,cols:2};F[pi]={Type:Float32Array,size:48,setter:il,rows:3,cols:3};F[yi]={Type:Float32Array,size:64,setter:al,rows:4,cols:4};F[Pu]={Type:Float32Array,size:32,setter:sl,rows:2,cols:3};F[ju]={Type:Float32Array,size:32,setter:ul,rows:2,cols:4};F[ku]={Type:Float32Array,size:48,setter:cl,rows:3,cols:2};F[Ou]={Type:Float32Array,size:48,setter:fl,rows:3,cols:4};F[Fu]={Type:Float32Array,size:64,setter:ll,rows:4,cols:2};F[Mu]={Type:Float32Array,size:64,setter:dl,rows:4,cols:3};F[Iu]={Type:null,size:0,setter:de,arraySetter:he,bindPoint:Wn};F[Ru]={Type:null,size:0,setter:de,arraySetter:he,bindPoint:Yn};F[Cu]={Type:null,size:0,setter:de,arraySetter:he,bindPoint:Jr};F[Nu]={Type:null,size:0,setter:de,arraySetter:he,bindPoint:Wn};F[Uu]={Type:null,size:0,setter:de,arraySetter:he,bindPoint:qn};F[Lu]={Type:null,size:0,setter:de,arraySetter:he,bindPoint:qn};F[Bu]={Type:null,size:0,setter:de,arraySetter:he,bindPoint:Yn};F[zu]={Type:null,size:0,setter:de,arraySetter:he,bindPoint:Wn};F[Vu]={Type:null,size:0,setter:de,arraySetter:he,bindPoint:Jr};F[Du]={Type:null,size:0,setter:de,arraySetter:he,bindPoint:Yn};F[$u]={Type:null,size:0,setter:de,arraySetter:he,bindPoint:qn};F[Zu]={Type:null,size:0,setter:de,arraySetter:he,bindPoint:Wn};F[Gu]={Type:null,size:0,setter:de,arraySetter:he,bindPoint:Jr};F[Hu]={Type:null,size:0,setter:de,arraySetter:he,bindPoint:Yn};F[Wu]={Type:null,size:0,setter:de,arraySetter:he,bindPoint:qn};function Xn(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(Gn,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||Hn,n.normalize||!1,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function ot(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4iv(t,n.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(Gn,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||qr,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function Jn(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4uiv(t,n.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(Gn,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||Xr,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function Kr(e,t,n){const r=n.size,o=n.count;return function(i){e.bindBuffer(Gn,i.buffer);const a=i.size||i.numComponents||r,s=a/o,u=i.type||Hn,f=F[u].size*a,h=i.normalize||!1,d=i.offset||0,_=f/o;for(let m=0;m<o;++m)e.enableVertexAttribArray(t+m),e.vertexAttribPointer(t+m,s,u,h,f,d+_*m),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+m,i.divisor||0)}}const te={};te[Hn]={size:4,setter:Xn};te[oi]={size:8,setter:Xn};te[ii]={size:12,setter:Xn};te[ai]={size:16,setter:Xn};te[qr]={size:4,setter:ot};te[si]={size:8,setter:ot};te[ci]={size:12,setter:ot};te[ui]={size:16,setter:ot};te[Xr]={size:4,setter:Jn};te[_i]={size:8,setter:Jn};te[vi]={size:12,setter:Jn};te[bi]={size:16,setter:Jn};te[li]={size:4,setter:ot};te[fi]={size:8,setter:ot};te[di]={size:12,setter:ot};te[hi]={size:16,setter:ot};te[mi]={size:4,setter:Kr,count:2};te[pi]={size:9,setter:Kr,count:3};te[yi]={size:16,setter:Kr,count:4};const hl=/ERROR:\s*\d+:(\d+)/gi;function ml(e,t="",n=0){const r=[...t.matchAll(hl)],o=new Map(r.map((i,a)=>{const s=parseInt(i[1]),u=r[a+1],l=u?u.index:t.length,f=t.substring(i.index,l);return[s-1,f]}));return e.split(`
`).map((i,a)=>{const s=o.get(a);return`${a+1+n}: ${i}${s?`

^^^ ${s}`:""}`}).join(`
`)}const yo=/^[ \t]*\n/;function Si(e){let t=0;return yo.test(e)&&(t=1,e=e.replace(yo,"")),{lineOffset:t,shaderSource:e}}function pl(e,t){return e.errorCallback(t),e.callback&&setTimeout(()=>{e.callback(`${t}
${e.errors.join(`
`)}`)}),null}function yl(e,t,n,r){if(r=r||Yr,!e.getShaderParameter(n,pu)){const i=e.getShaderInfoLog(n),{lineOffset:a,shaderSource:s}=Si(e.getShaderSource(n)),u=`${ml(s,i,a)}
Error compiling ${Go(e,t)}: ${i}`;return r(u),u}return""}function Qr(e,t,n){let r,o,i;if(typeof t=="function"&&(n=t,t=void 0),typeof e=="function")n=e,e=void 0;else if(e&&!Array.isArray(e)){const l=e;n=l.errorCallback,e=l.attribLocations,r=l.transformFeedbackVaryings,o=l.transformFeedbackMode,i=l.callback}const a=n||Yr,s=[],u={errorCallback(l,...f){s.push(l),a(l,...f)},transformFeedbackVaryings:r,transformFeedbackMode:o,callback:i,errors:s};{let l={};Array.isArray(e)?e.forEach(function(f,h){l[f]=t?t[h]:h}):l=e||{},u.attribLocations=l}return u}const _l=["VERTEX_SHADER","FRAGMENT_SHADER"];function vl(e,t){if(t.indexOf("frag")>=0)return _u;if(t.indexOf("vert")>=0)return vu}function bl(e,t,n){const r=e.getAttachedShaders(t);for(const o of r)n.has(o)&&e.deleteShader(o);e.deleteProgram(t)}const xl=(e=0)=>new Promise(t=>setTimeout(t,e));function gl(e,t,n){const r=e.createProgram(),{attribLocations:o,transformFeedbackVaryings:i,transformFeedbackMode:a}=Qr(n);for(let s=0;s<t.length;++s){let u=t[s];if(typeof u=="string"){const l=ni(u),f=l?l.text:u;let h=e[_l[s]];l&&l.type&&(h=vl(e,l.type)||h),u=e.createShader(h),e.shaderSource(u,Si(f).shaderSource),e.compileShader(u),e.attachShader(r,u)}}Object.entries(o).forEach(([s,u])=>e.bindAttribLocation(r,u,s));{let s=i;s&&(s.attribs&&(s=s.attribs),Array.isArray(s)||(s=Object.keys(s)),e.transformFeedbackVaryings(r,s,a||bu))}return e.linkProgram(r),r}function Tl(e,t,n,r,o){const i=Qr(n,r,o),a=new Set(t),s=gl(e,t,i);function u(l,f){const h=El(l,f,i.errorCallback);return h&&bl(l,f,a),h}if(i.callback){wl(e,s).then(()=>{const l=u(e,s);i.callback(l,l?void 0:s)});return}return u(e,s)?void 0:s}async function wl(e,t){const n=e.getExtension("KHR_parallel_shader_compile"),r=n?(i,a)=>i.getProgramParameter(a,n.COMPLETION_STATUS_KHR):()=>!0;let o=0;do await xl(o),o=1e3/60;while(!r(e,t))}function El(e,t,n){if(n=n||Yr,!e.getProgramParameter(t,yu)){const o=e.getProgramInfoLog(t);n(`Error in program linking: ${o}`);const a=e.getAttachedShaders(t).map(s=>yl(e,e.getShaderParameter(s,e.SHADER_TYPE),s,n));return`${o}
${a.filter(s=>s).join(`
`)}`}}function Al(e,t,n,r,o){return Tl(e,t,n,r,o)}function Ii(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const Sl=/(\.|\[|]|\w+)/g,Il=e=>e>="0"&&e<="9";function Rl(e,t,n,r){const o=e.split(Sl).filter(s=>s!=="");let i=0,a="";for(;;){const s=o[i++];a+=s;const u=Il(s[0]),l=u?parseInt(s):s;if(u&&(a+=o[i++]),i===o.length){n[l]=t;break}else{const h=o[i++],d=h==="[",_=n[l]||(d?[]:{});n[l]=_,n=_,r[a]=r[a]||function(m){return function(p){Ri(m,p)}}(_),a+=h}}}function Cl(e,t){let n=0;function r(s,u,l){const f=u.name.endsWith("[0]"),h=u.type,d=F[h];if(!d)throw new Error(`unknown type: 0x${h.toString(16)}`);let _;if(d.bindPoint){const m=n;n+=u.size,f?_=d.arraySetter(e,h,m,l,u.size):_=d.setter(e,h,m,l,u.size)}else d.arraySetter&&f?_=d.arraySetter(e,l):_=d.setter(e,l);return _.location=l,_}const o={},i={},a=e.getProgramParameter(t,ri);for(let s=0;s<a;++s){const u=e.getActiveUniform(t,s);if(Ii(u))continue;let l=u.name;l.endsWith("[0]")&&(l=l.substr(0,l.length-3));const f=e.getUniformLocation(t,u.name);if(f){const h=r(t,u,f);o[l]=h,Rl(l,h,i,o)}}return o}function Nl(e,t){const n={},r=e.getProgramParameter(t,gu);for(let o=0;o<r;++o){const i=e.getTransformFeedbackVarying(t,o);n[i.name]={index:o,type:i.type,size:i.size}}return n}function Pl(e,t){const n=e.getProgramParameter(t,ri),r=[],o=[];for(let s=0;s<n;++s){o.push(s),r.push({});const u=e.getActiveUniform(t,s);r[s].name=u.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(s){const u=s[0],l=s[1];e.getActiveUniforms(t,o,e[u]).forEach(function(f,h){r[h][l]=f})});const i={},a=e.getProgramParameter(t,Tu);for(let s=0;s<a;++s){const u=e.getActiveUniformBlockName(t,s),l={index:e.getUniformBlockIndex(t,u),usedByVertexShader:e.getActiveUniformBlockParameter(t,s,wu),usedByFragmentShader:e.getActiveUniformBlockParameter(t,s,Eu),size:e.getActiveUniformBlockParameter(t,s,Au),uniformIndices:e.getActiveUniformBlockParameter(t,s,Su)};l.used=l.usedByVertexShader||l.usedByFragmentShader,i[u]=l}return{blockSpecs:i,uniformData:r}}function Ri(e,t){for(const n in t){const r=e[n];typeof r=="function"?r(t[n]):Ri(e[n],t[n])}}function Be(e,...t){const n=e.uniformSetters||e,r=t.length;for(let o=0;o<r;++o){const i=t[o];if(Array.isArray(i)){const a=i.length;for(let s=0;s<a;++s)Be(n,i[s])}else for(const a in i){const s=n[a];s&&s(i[a])}}}function jl(e,t){const n={},r=e.getProgramParameter(t,xu);for(let o=0;o<r;++o){const i=e.getActiveAttrib(t,o);if(Ii(i))continue;const a=e.getAttribLocation(t,i.name),s=te[i.type],u=s.setter(e,a,s);u.location=a,n[i.name]=u}return n}function kl(e,t){for(const n in t){const r=e[n];r&&r(t[n])}}function je(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(kl(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(mu,n.indices))}function _o(e,t){const n=Cl(e,t),r=jl(e,t),o={program:t,uniformSetters:n,attribSetters:r};return ln(e)&&(o.uniformBlockSpec=Pl(e,t),o.transformFeedbackInfo=Nl(e,t)),o}const Ol=/\s|{|}|;/;function ze(e,t,n,r,o){const i=Qr(n,r,o),a=[];if(t=t.map(function(l){if(!Ol.test(l)){const f=ni(l);if(f)l=f.text;else{const h=`no element with id: ${l}`;i.errorCallback(h),a.push(h)}}return l}),a.length)return pl(i,"");const s=i.callback;s&&(i.callback=(l,f)=>{s(l,l?void 0:_o(e,f))});const u=Al(e,t,i);return u?_o(e,u):null}const Fl=4,vo=5123;function Ve(e,t,n,r,o,i){n=n===void 0?Fl:n;const a=t.indices,s=t.elementType,u=r===void 0?t.numElements:r;o=o===void 0?0:o,s||a?i!==void 0?e.drawElementsInstanced(n,u,s===void 0?vo:t.elementType,o,i):e.drawElements(n,u,s===void 0?vo:t.elementType,o):i!==void 0?e.drawArraysInstanced(n,o,u,i):e.drawArrays(n,o,u)}function De(e,t,n){const r=e.createVertexArray();return e.bindVertexArray(r),t.length||(t=[t]),t.forEach(function(o){je(e,o,n)}),e.bindVertexArray(null),{numElements:n.numElements,elementType:n.elementType,vertexArrayObject:r}}const Ml={addExtensionsToContext:!0};function $e(e){Rr(e,Ml),Ua(e),ru(e)}function Ze(e,t){t=t||1,t=Math.max(0,t);const n=e.clientWidth*t|0,r=e.clientHeight*t|0;return e.width!==n||e.height!==r?(e.width=n,e.height=r,!0):!1}const Ul=`#version 300 es

precision mediump float;

in vec3 v_color;

out vec4 frag_color;

void main() {
    frag_color = vec4(v_color, 1.0f);
}`,Ll=`#version 300 es

in vec3 a_position;
in vec3 a_color;

out vec3 v_color;

void main() {
    v_color = a_color;
    gl_Position = vec4(a_position, 1.0f);
}`;async function Bl(e){$e({attribPrefix:"a_"});const t=ze(e,[Ll,Ul]),r=De(e,t,nt(e,{position:{numComponents:3,data:[0,.5,0,-.5,-.5,0,.5,-.5,0]},color:{numComponents:3,data:[1,0,0,0,1,0,0,0,1]},indices:{numComponents:3,data:[0,1,2]}}));return o=>{Ze(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.useProgram(t.program),je(e,t,r),Ve(e,r)}}function*Kn(e,t){for(const n of t)yield e(n)}function*rr(e,t,n=1){t===void 0&&(t=e,e=0);for(let r=e;n>=0?r<t:r>t;r+=n)yield r}function*zl(e){const t=Array.from(e).reverse();for(const n of t)yield n}function*B(e,t){const n=Array.from(e),r=n.length;if(t=t??r,t>r)return;const o=Array.from(rr(r)),i=Array.from(rr(r,r-t,-1));yield o.slice(void 0,t).map(s=>n[s]);const a=Array.from(zl(rr(t)));for(;r;){let s=!1;for(const u of a)if(i[u]-=1,i[u]===0)o.push(o.splice(u,1)[0]),i[u]=r-u;else{const l=i[u];[o[u],o[r-l]]=[o[r-l],o[u]],yield o.slice(void 0,t).map(f=>n[f]),s=!0;break}if(!s)return}}function*z(...e){const t=e.length-1,[n,r]=typeof e[t]=="number"?[e.slice(void 0,t),e[t]]:[e,1],o=new Array(r).fill(n.map(a=>Array.from(a))).flat();let i=[[]];for(const a of o){const s=[];for(const u of i)for(const l of a)s.push([...u,l]);i=s}for(const a of i)yield a}function Vl(e,t,n){const r=t[Symbol.iterator]();let o;o={done:!1,value:n};let i=o.value;for(let a=r.next();!a.done;a=r.next())i=e(i,a.value);return i}function*hn(...e){const t=e.map(n=>n[Symbol.iterator]());for(;t.length>0;){const n=[];for(const r of t){const o=r.next();if(o.done)return;n.push(o.value)}yield n}}const be={x:0,y:1,z:2,w:3,r:0,g:1,b:2,a:3,s:0,t:1,p:2,q:3},xn=[[...z(["x","y"],1),...z(["r","g"],1),...z(["s","t"],1)].map(e=>e.join("")),[...z(["x","y"],2),...z(["r","g"],2),...z(["s","t"],2)].map(e=>e.join("")),[...z(["x","y"],3),...z(["r","g"],3),...z(["s","t"],3)].map(e=>e.join("")),[...z(["x","y"],4),...z(["r","g"],4),...z(["s","t"],4)].map(e=>e.join(""))],gn=[[...B(["x","y"],1),...B(["r","g"],1),...B(["s","t"],1)].map(e=>e.join("")),[...B(["x","y"],2),...B(["r","g"],2),...B(["s","t"],2)].map(e=>e.join("")),[...B(["x","y"],3),...B(["r","g"],3),...B(["s","t"],3)].map(e=>e.join("")),[...B(["x","y"],4),...B(["r","g"],4),...B(["s","t"],4)].map(e=>e.join(""))],Dl={get(e,t,n){if(typeof t=="string"){if(t.length===1&&xn[0].includes(t))return e[be[t]];if(t.length===2&&xn[1].includes(t)||t.length===3&&xn[2].includes(t)||t.length===4&&xn[3].includes(t)){const r=new Array(t.length),o=t.split("");for(const[i,a]of o.entries())r[i]=e[be[a]];return r}}return Reflect.get(e,t,n)},set(e,t,n,r){if(typeof t=="string"){if(t.length===1&&gn[0].includes(t))return e[be[t]]=n,!0;if(t.length===2&&gn[1].includes(t)||t.length===3&&gn[2].includes(t)||t.length===4&&gn[3].includes(t)){const o=t.split("");for(const[i,a]of o.entries())e[be[a]]=n[i];return!0}}return Reflect.set(e,t,n,r)}};function Te(...e){const t=e.flat();if(t.length===1&&(t.length=2,t.fill(t[0])),t.length<2)throw new Error("Not enough components");return new Proxy(t.slice(void 0,2),Dl)}const Tn=[[...z(["x","y","z"],1),...z(["r","g","b"],1),...z(["s","t","p"],1)].map(e=>e.join("")),[...z(["x","y","z"],2),...z(["r","g","b"],2),...z(["s","t","p"],2)].map(e=>e.join("")),[...z(["x","y","z"],3),...z(["r","g","b"],3),...z(["s","t","p"],3)].map(e=>e.join("")),[...z(["x","y","z"],4),...z(["r","g","b"],4),...z(["s","t","p"],4)].map(e=>e.join(""))],wn=[[...B(["x","y","z"],1),...B(["r","g","b"],1),...B(["s","t","p"],1)].map(e=>e.join("")),[...B(["x","y","z"],2),...B(["r","g","b"],2),...B(["s","t","p"],2)].map(e=>e.join("")),[...B(["x","y","z"],3),...B(["r","g","b"],3),...B(["s","t","p"],3)].map(e=>e.join("")),[...B(["x","y","z"],4),...B(["r","g","b"],4),...B(["s","t","p"],4)].map(e=>e.join(""))],$l={get(e,t,n){if(typeof t=="string"){if(t.length===1&&Tn[0].includes(t))return e[be[t]];if(t.length===2&&Tn[1].includes(t)||t.length===3&&Tn[2].includes(t)||t.length===4&&Tn[3].includes(t)){const r=new Array(t.length),o=t.split("");for(const[i,a]of o.entries())r[i]=e[be[a]];return r}}return Reflect.get(e,t,n)},set(e,t,n,r){if(typeof t=="string"){if(t.length===1&&wn[0].includes(t))return e[be[t]]=n,!0;if(t.length===2&&wn[1].includes(t)||t.length===3&&wn[2].includes(t)||t.length===4&&wn[3].includes(t)){const o=t.split("");for(const[i,a]of o.entries())e[be[a]]=n[i];return!0}}return Reflect.set(e,t,n,r)}};function E(...e){const t=e.flat();if(t.length===1&&(t.length=3,t.fill(t[0])),t.length<3)throw new Error("Not enough components");return new Proxy(t.slice(void 0,3),$l)}const En=[[...z(["x","y","z","w"],1),...z(["r","g","b","a"],1),...z(["s","t","p","q"],1)].map(e=>e.join("")),[...z(["x","y","z","w"],2),...z(["r","g","b","a"],2),...z(["s","t","p","q"],2)].map(e=>e.join("")),[...z(["x","y","z","w"],3),...z(["r","g","b","a"],3),...z(["s","t","p","q"],3)].map(e=>e.join("")),[...z(["x","y","z","w"],4),...z(["r","g","b","a"],4),...z(["s","t","p","q"],4)].map(e=>e.join(""))],An=[[...B(["x","y","z","w"],1),...B(["r","g","b","a"],1),...B(["s","t","p","q"],1)].map(e=>e.join("")),[...B(["x","y","z","w"],2),...B(["r","g","b","a"],2),...B(["s","t","p","q"],2)].map(e=>e.join("")),[...B(["x","y","z","w"],3),...B(["r","g","b","a"],3),...B(["s","t","p","q"],3)].map(e=>e.join("")),[...B(["x","y","z","w"],4),...B(["r","g","b","a"],4),...B(["s","t","p","q"],4)].map(e=>e.join(""))],Zl={get(e,t,n){if(typeof t=="string"){if(t.length===1&&En[0].includes(t))return e[be[t]];if(t.length===2&&En[1].includes(t)||t.length===3&&En[2].includes(t)||t.length===4&&En[3].includes(t)){const r=new Array(t.length),o=t.split("");for(const[i,a]of o.entries())r[i]=e[be[a]];return r}}return Reflect.get(e,t,n)},set(e,t,n,r){if(typeof t=="string"){if(t.length===1&&An[0].includes(t))return e[be[t]]=n,!0;if(t.length===2&&An[1].includes(t)||t.length===3&&An[2].includes(t)||t.length===4&&An[3].includes(t)){const o=t.split("");for(const[i,a]of o.entries())e[be[a]]=n[i];return!0}}return Reflect.set(e,t,n,r)}};function N(...e){const t=e.flat();if(t.length===1&&(t.length=4,t.fill(t[0])),t.length<4)throw new Error("Not enough components");return new Proxy(t.slice(void 0,4),Zl)}const ee={1:Number,2:Te,3:E,4:N};function it(e,...t){return ee[t[0].length](...Array.from(Kn(n=>e(...n),hn(...t))))}function k(e){return typeof e=="number"}function Nn(...e){if(e.length===1){if(k(e[0])){const r=e[0];return[Te(r,0),Te(0,r)]}else if(!k(e[0][0])){const r=Nn(1),o=Math.min(2,e[0].length),i=Math.min(2,e[0][0].length);for(let a=0;a<o;a++)for(let s=0;s<i;s++)r[a][s]=e[0][a][s];return r}}const t=Nn(1),n=e.flat(2);for(let r=0;r<n.length;r++){const o=r%2,i=(r-o)/2;t[i][o]=n[r]}return t}function Pn(...e){if(e.length===1){if(k(e[0])){const r=e[0];return[E(r,0,0),E(0,r,0),E(0,0,r)]}else if(!k(e[0][0])){const r=Pn(1),o=Math.min(3,e[0].length),i=Math.min(3,e[0][0].length);for(let a=0;a<o;a++)for(let s=0;s<i;s++)r[a][s]=e[0][a][s];return r}}const t=Pn(1),n=e.flat(2);for(let r=0;r<n.length;r++){const o=r%3,i=(r-o)/3;t[i][o]=n[r]}return t}function O(...e){if(e.length===1){if(k(e[0])){const r=e[0];return[N(r,0,0,0),N(0,r,0,0),N(0,0,r,0),N(0,0,0,r)]}else if(!k(e[0][0])){const r=O(1),o=Math.min(4,e[0].length),i=Math.min(4,e[0][0].length);for(let a=0;a<o;a++)for(let s=0;s<i;s++)r[a][s]=e[0][a][s];return r}}const t=O(1),n=e.flat(2);for(let r=0;r<n.length;r++){const o=r%4,i=(r-o)/4;t[i][o]=n[r]}return t}const pe={2:Nn,3:Pn,4:O};function ue(e,t){if(k(e)){if(k(t))return e+t;if(k(t[0]))return ue(ee[t.length](e),t);{const n=ee[t[0].length](e);return pe[t.length](...t.map(r=>ue(n,r)))}}else if(k(e[0])){if(k(t))return ue(e,ee[e.length](t));if(k(t[0]))return it(ue,e,t);throw new Error("Cannot add vector and matrix")}else if(k(t)){const n=ee[e[0].length](t);return pe[e.length](...e.map(r=>ue(r,n)))}else{if(k(t[0]))throw new Error("Cannot add matrix and vector");return pe[e.length](...Kn(([n,r])=>ue(n,r),hn(e,t)))}}function jn(e,t){return E(e[1]*t[2]-t[1]*e[2],e[2]*t[0]-t[2]*e[0],e[0]*t[1]-t[0]*e[1])}function J(e,t){if(k(e)){if(k(t))return e-t;if(k(t[0]))return J(ee[t.length](e),t);{const n=ee[t[0].length](e);return pe[t.length](...t.map(r=>J(n,r)))}}else if(k(e[0])){if(k(t))return J(e,ee[e.length](t));if(k(t[0]))return it(J,e,t);throw new Error("Cannot add vector and matrix")}else if(k(t)){const n=ee[e[0].length](t);return pe[e.length](...e.map(r=>J(r,n)))}else{if(k(t[0]))throw new Error("Cannot add matrix and vector");return pe[e.length](...Kn(([n,r])=>J(n,r),hn(e,t)))}}function Gl(e){return Math.sqrt(e.reduce((t,n)=>t+n*n,0))}function mt(e,t){if(k(e)){if(k(t))return e/t;if(k(t[0]))return mt(ee[t.length](e),t);{const n=ee[t[0].length](e);return pe[t.length](...t.map(r=>mt(n,r)))}}else if(k(e[0])){if(k(t))return mt(e,ee[e.length](t));if(k(t[0]))return it(mt,e,t);throw new Error("Cannot add vector and matrix")}else if(k(t)){const n=ee[e[0].length](t);return pe[e.length](...e.map(r=>mt(r,n)))}else{if(k(t[0]))throw new Error("Cannot add matrix and vector");return pe[e.length](...Kn(([n,r])=>mt(n,r),hn(e,t)))}}function Rt(e,t){return Vl((n,[r,o])=>n+r*o,hn(e,t),0)}function pr(e){return k(e)?Math.floor(e):it(pr,e)}function Ae(e){const t=pe[e.length]();for(let n=0;n<e.length;n++)for(let r=0;r<e[0].length;r++)t[r][n]=e[n][r];return t}function C(e,t){if(k(e)){if(k(t))return e*t;if(k(t[0]))return C(ee[t.length](e),t);{const n=ee[t[0].length](e);return pe[t.length](...t.map(r=>C(n,r)))}}else{if(k(e[0]))return k(t)?C(e,ee[e.length](t)):k(t[0])?it(C,e,t):ee[t.length](...t.map(n=>Rt(e,n)));if(k(t)){const n=ee[e[0].length](t);return pe[e.length](...e.map(r=>C(r,n)))}else return k(t[0])?ee[e.length](...Ae(e).map(n=>Rt(n,t))):Ae(pe[e.length](...Ae(e).map(n=>ee[t.length](t.map(r=>Rt(n,r))))))}}function me(e){if(e.length===2){const t=1/(e[0][0]*e[1][1]-e[1][0]*e[0][1]);return Nn(Te(e[1][1]*t,-e[0][1]*t),Te(-e[1][0]*t,e[0][0]*t))}else if(e.length===3){const t=1/(e[0][0]*(e[1][1]*e[2][2]-e[2][1]*e[1][2])-e[1][0]*(e[0][1]*e[2][2]-e[2][1]*e[0][2])+e[2][0]*(e[0][1]*e[1][2]-e[1][1]*e[0][2])),n=Pn(E(e[1][1]*e[2][2]-e[2][1]*e[1][2],-(e[0][1]*e[2][2]-e[2][1]*e[0][2]),e[0][1]*e[1][2]-e[1][1]*e[0][2]),E(-(e[1][0]*e[2][2]-e[2][0]*e[1][2]),e[0][0]*e[2][2]-e[2][0]*e[0][2],-(e[0][0]*e[1][2]-e[1][0]*e[0][2])),E(e[1][0]*e[2][1]-e[2][0]*e[1][1],-(e[0][0]*e[2][1]-e[2][0]*e[0][1]),e[0][0]*e[1][1]-e[1][0]*e[0][1]));return C(n,t)}else{const t=e[2][2]*e[3][3]-e[3][2]*e[2][3],n=e[1][2]*e[3][3]-e[3][2]*e[1][3],r=e[1][2]*e[2][3]-e[2][2]*e[1][3],o=e[2][1]*e[3][3]-e[3][1]*e[2][3],i=e[1][1]*e[3][3]-e[3][1]*e[1][3],a=e[1][1]*e[2][3]-e[2][1]*e[1][3],s=e[2][1]*e[3][2]-e[3][1]*e[2][2],u=e[1][1]*e[3][2]-e[3][1]*e[1][2],l=e[1][1]*e[2][2]-e[2][1]*e[1][2],f=e[2][0]*e[3][3]-e[3][0]*e[2][3],h=e[1][0]*e[3][3]-e[3][0]*e[1][3],d=e[1][0]*e[2][3]-e[2][0]*e[1][3],_=e[2][0]*e[3][2]-e[3][0]*e[2][2],m=e[1][0]*e[3][2]-e[3][0]*e[1][2],p=e[1][0]*e[2][2]-e[2][0]*e[1][2],y=e[2][0]*e[3][1]-e[3][0]*e[2][1],v=e[1][0]*e[3][1]-e[3][0]*e[1][1],b=e[1][0]*e[2][1]-e[2][0]*e[1][1],A=N(t,t,n,r),I=N(o,o,i,a),w=N(s,s,u,l),R=N(f,f,h,d),U=N(_,_,m,p),$=N(y,y,v,b),Z=N(e[1][0],e[0][0],e[0][0],e[0][0]),G=N(e[1][1],e[0][1],e[0][1],e[0][1]),H=N(e[1][2],e[0][2],e[0][2],e[0][2]),K=N(e[1][3],e[0][3],e[0][3],e[0][3]),Q=N(ue(J(C(G,A),C(H,I)),C(K,w))),ne=N(ue(J(C(Z,A),C(H,R)),C(K,U))),ie=N(ue(J(C(Z,I),C(G,R)),C(K,$))),ae=N(ue(J(C(Z,w),C(G,U)),C(H,$))),re=N(1,-1,1,-1),oe=N(-1,1,-1,1),_e=O(C(Q,re),C(ne,oe),C(ie,re),C(ae,oe)),gt=N(_e[0][0],_e[1][0],_e[2][0],_e[3][0]),ke=C(e[0],gt),Tt=1/(ke.x+ke.y+(ke.z+ke.w));return C(_e,Tt)}}function Yt(e){return mt(e,Gl(e))}function at(e,t,n){const r=Yt(J(t,e)),o=Yt(jn(r,n)),i=jn(o,r);return O(o.x,i.x,-r.x,0,o.y,i.y,-r.y,0,o.z,i.z,-r.z,0,-Rt(o,e),-Rt(i,e),Rt(r,e),1)}function Dt(e,t,n){return k(e)&&k(n)?e*(1-n)+t*n:k(n)?Dt(e,t,ee[e.length](n)):it(Dt,e,t,n)}function Ci(e){return k(e)?Math.tan(e):it(Ci,e)}function st(e,t,n,r){const o=Ci(e/2);return O(N(1/(t*o),0,0,0),N(0,1/o,0,0),N(0,0,-(r+n)/(r-n),-1),N(0,0,-(2*r*n)/(r-n),0))}function Ge(e){return k(e)?Math.PI*e/180:it(Ge,e)}function ct(e,t,n){const r=t,o=Math.cos(r),i=Math.sin(r),a=Yt(n),s=E(C(1-o,a));return O(ue(ue(C(e[0],o+s[0]*a[0]),C(e[1],s[0]*a[1]+i*a[2])),C(e[2],s[0]*a[2]-i*a[1])),ue(ue(C(e[0],s[1]*a[0]-i*a[2]),C(e[1],o+s[1]*a[1])),C(e[2],s[1]*a[2]+i*a[0])),ue(ue(C(e[0],s[2]*a[0]+i*a[1]),C(e[1],s[2]*a[1]-i*a[0])),C(e[2],o+s[2]*a[2])),e[3])}const Hl=`#version 300 es

precision mediump float;

in vec2 v_texCoord;
in vec3 v_normal;
in vec3 v_surfaceToLight;
in vec3 v_surfaceToView;

uniform vec4 u_lightColor;
uniform vec4 u_ambient;
uniform sampler2D u_diffuse;
uniform vec4 u_specular;
uniform float u_shininess;
uniform float u_specularFactor;

out vec4 outColor;

vec4 lit(float l, float h, float m) {
  return vec4(1.0f, max(l, 0.0f), (l > 0.0f) ? pow(max(0.0f, h), m) : 0.0f, 1.0f);
}

void main() {
  vec4 diffuseColor = texture(u_diffuse, v_texCoord);
  vec3 a_normal = normalize(v_normal);
  vec3 surfaceToLight = normalize(v_surfaceToLight);
  vec3 surfaceToView = normalize(v_surfaceToView);
  vec3 halfVector = normalize(surfaceToLight + surfaceToView);
  vec4 litR = lit(dot(a_normal, surfaceToLight), dot(a_normal, halfVector), u_shininess);
  outColor = vec4((u_lightColor * (diffuseColor * litR.y + diffuseColor * u_ambient +
    u_specular * litR.z * u_specularFactor)).rgb, diffuseColor.a);
}
`,Wl=`#version 300 es

uniform mat4 u_worldViewProjection;
uniform vec3 u_lightWorldPos;
uniform mat4 u_world;
uniform mat4 u_viewInverse;
uniform mat4 u_worldInverseTranspose;

in vec4 a_position;
in vec3 a_normal;
in vec2 a_texcoord;

out vec2 v_texCoord;
out vec3 v_normal;
out vec3 v_surfaceToLight;
out vec3 v_surfaceToView;

void main() {
  v_texCoord = a_texcoord;
  v_normal = (u_worldInverseTranspose * vec4(a_normal, 0)).xyz;
  v_surfaceToLight = u_lightWorldPos - (u_world * a_position).xyz;
  v_surfaceToView = (u_viewInverse[3] - (u_world * a_position)).xyz;
  gl_Position = u_worldViewProjection * a_position;
}
`;async function Yl(e){$e({attribPrefix:"a_"});const t=ze(e,[Wl,Hl]),n=De(e,t,Nt.createSphereBufferInfo(e,1.5,24,12)),r=Ue(e,{min:e.NEAREST,mag:e.NEAREST,src:"brickwall.jpg"}),o={u_lightWorldPos:E(1,8,-10),u_lightColor:N(1,1,1,1),u_ambient:N(.1,.1,.1,1),u_specular:N(.2,.2,.2,1),u_shininess:32,u_specularFactor:1,u_diffuse:r,u_viewInverse:O(1).flat(),u_world:O(1).flat(),u_worldInverseTranspose:O(1).flat(),u_worldViewProjection:O(1).flat()};return i=>{Ze(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);const a=Ge(30),s=e.canvas.clientWidth/e.canvas.clientHeight,f=st(a,s,.5,10),h=E(1,4,-6),d=E(0,0,0),_=E(0,1,0),m=at(h,d,_),p=C(f,m),y=ct(O(1),document.timeline.currentTime*1e-4,E(0,1,0));Object.assign(o,{u_viewInverse:me(m).flat(),u_world:y.flat(),u_worldInverseTranspose:Ae(me(y)).flat(),u_worldViewProjection:C(p,y).flat()}),e.useProgram(t.program),je(e,t,n),Be(t,o),Ve(e,n)}}const ql=`#version 300 es

precision mediump float;

in vec2 v_texCoord;
in vec3 v_surfaceToLight;
in vec3 v_surfaceToView;

uniform vec4 u_lightColor;
uniform vec4 u_ambient;
uniform sampler2D u_diffuse;
uniform sampler2D u_normal;
uniform vec4 u_specular;
uniform float u_shininess;
uniform float u_specularFactor;

out vec4 outColor;

vec4 lit(float l, float h, float m) {
  return vec4(1.0f, max(l, 0.0f), (l > 0.0f) ? pow(max(0.0f, h), m) : 0.0f, 1.0f);
}

void main() {
  vec4 diffuseColor = texture(u_diffuse, v_texCoord);
  vec3 normal = texture(u_normal, v_texCoord).rgb;
  normal = normalize(normal * 2.0 - 1.0);
  vec3 surfaceToLight = normalize(v_surfaceToLight);
  vec3 surfaceToView = normalize(v_surfaceToView);
  vec3 halfVector = normalize(surfaceToLight + surfaceToView);
  vec4 litR = lit(dot(normal, surfaceToLight), dot(normal, halfVector), u_shininess);
  outColor = vec4((u_lightColor * (diffuseColor * litR.y + diffuseColor * u_ambient +
    u_specular * litR.z * u_specularFactor)).rgb, diffuseColor.a);
}
`,Xl=`#version 300 es

uniform mat4 u_worldViewProjection;
uniform vec3 u_lightWorldPos;
uniform mat4 u_world;
uniform mat4 u_viewInverse;
uniform mat4 u_worldInverseTranspose;

in vec4 a_position;
in vec3 a_normal;
in vec2 a_texcoord;
in vec3 a_tangent;

out vec2 v_texCoord;
out vec3 v_surfaceToLight;
out vec3 v_surfaceToView;

void main() {
  v_texCoord = a_texcoord;
  vec3 tangent = normalize((u_worldInverseTranspose * vec4(a_tangent, 0)).xyz);
  vec3 normal = normalize((u_worldInverseTranspose * vec4(a_normal, 0)).xyz);
  tangent = normalize(tangent - dot(tangent, normal) * normal); // re-orthogonalize tangent with respect to normal
  vec3 bitangent = cross(normal, tangent); // retrieve perpendicular bitangent with the cross product of normal and tangent
  mat3 tbn = transpose(mat3(tangent, bitangent, normal));
  v_surfaceToLight = tbn * (u_lightWorldPos - (u_world * a_position).xyz);
  v_surfaceToView = tbn * ((u_viewInverse[3] - (u_world * a_position)).xyz);
  gl_Position = u_worldViewProjection * a_position;
}
`;async function Jl(e){$e({attribPrefix:"a_"});const t=ze(e,[Xl,ql]),n=Kl(Nt.createSphereVertices(1.5,24,12)),r=De(e,t,nt(e,n)),o=Ue(e,{min:e.NEAREST,mag:e.NEAREST,src:"brickwall.jpg"}),i=Ue(e,{min:e.NEAREST,mag:e.NEAREST,src:"brickwall_normal.jpg"}),a={u_lightWorldPos:E(1,8,-10),u_lightColor:N(1,1,1,1),u_ambient:N(.1,.1,.1,1),u_specular:N(.2,.2,.2,1),u_shininess:32,u_specularFactor:1,u_diffuse:o,u_normal:i,u_viewInverse:O(1).flat(),u_world:O(1).flat(),u_worldInverseTranspose:O(1).flat(),u_worldViewProjection:O(1).flat()};return s=>{Ze(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);const u=Ge(30),l=e.canvas.clientWidth/e.canvas.clientHeight,d=st(u,l,.5,10),_=E(1,4,-6),m=E(0,0,0),p=E(0,1,0),y=at(_,m,p),v=C(d,y),b=ct(O(1),document.timeline.currentTime*1e-4,E(0,1,0));Object.assign(a,{u_viewInverse:me(y).flat(),u_world:b.flat(),u_worldInverseTranspose:Ae(me(b)).flat(),u_worldViewProjection:C(v,b).flat()}),e.useProgram(t.program),je(e,t,r),Be(t,a),Ve(e,r)}}function Kl(e){const t=e.position,n=e.normal,r=e.texcoord,o=e.indices,i=new Float32Array(n.length),a=new Array(t.length/3).fill(0);for(let s=0;s<o.length;s+=3){const u=E(...t.slice(o[s+0]*3,o[s+0]*3+3)),l=E(...t.slice(o[s+1]*3,o[s+1]*3+3)),f=E(...t.slice(o[s+2]*3,o[s+2]*3+3)),h=Te(...r.slice(o[s+0]*2,o[s+0]*2+2)),d=Te(...r.slice(o[s+1]*2,o[s+1]*2+2)),_=Te(...r.slice(o[s+2]*2,o[s+2]*2+2)),m=J(l,u),p=J(f,u),y=J(d,h),v=J(_,h),b=1/(y[0]*v[1]-v[0]*y[1]);i[o[s+0]*3+0]+=b*(v[1]*m[0]-y[1]*p[0]),i[o[s+0]*3+1]+=b*(v[1]*m[1]-y[1]*p[1]),i[o[s+0]*3+2]+=b*(v[1]*m[2]-y[1]*p[2]),i[o[s+1]*3+0]+=b*(v[1]*m[0]-y[1]*p[0]),i[o[s+1]*3+1]+=b*(v[1]*m[1]-y[1]*p[1]),i[o[s+1]*3+2]+=b*(v[1]*m[2]-y[1]*p[2]),i[o[s+2]*3+0]+=b*(v[1]*m[0]-y[1]*p[0]),i[o[s+2]*3+1]+=b*(v[1]*m[1]-y[1]*p[1]),i[o[s+2]*3+2]+=b*(v[1]*m[2]-y[1]*p[2]),a[o[s+0]]+=1,a[o[s+1]]+=1,a[o[s+2]]+=1}for(let s=0;s<a.length;s++)i[s*3+0]/=a[s],i[s*3+1]/=a[s],i[s*3+2]/=a[s];return{...e,tangent:i}}var D;(function(e){e.assertEqual=o=>o;function t(o){}e.assertIs=t;function n(o){throw new Error}e.assertNever=n,e.arrayToEnum=o=>{const i={};for(const a of o)i[a]=a;return i},e.getValidEnumValues=o=>{const i=e.objectKeys(o).filter(s=>typeof o[o[s]]!="number"),a={};for(const s of i)a[s]=o[s];return e.objectValues(a)},e.objectValues=o=>e.objectKeys(o).map(function(i){return o[i]}),e.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const i=[];for(const a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.push(a);return i},e.find=(o,i)=>{for(const a of o)if(i(a))return a},e.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function r(o,i=" | "){return o.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(o,i)=>typeof i=="bigint"?i.toString():i})(D||(D={}));var yr;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(yr||(yr={}));const T=D.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),qe=e=>{switch(typeof e){case"undefined":return T.undefined;case"string":return T.string;case"number":return isNaN(e)?T.nan:T.number;case"boolean":return T.boolean;case"function":return T.function;case"bigint":return T.bigint;case"symbol":return T.symbol;case"object":return Array.isArray(e)?T.array:e===null?T.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?T.promise:typeof Map<"u"&&e instanceof Map?T.map:typeof Set<"u"&&e instanceof Set?T.set:typeof Date<"u"&&e instanceof Date?T.date:T.object;default:return T.unknown}},x=D.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Ql=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class ye extends Error{constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const n=t||function(i){return i.message},r={_errors:[]},o=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(o);else if(a.code==="invalid_return_type")o(a.returnTypeError);else if(a.code==="invalid_arguments")o(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let s=r,u=0;for(;u<a.path.length;){const l=a.path[u];u===a.path.length-1?(s[l]=s[l]||{_errors:[]},s[l]._errors.push(n(a))):s[l]=s[l]||{_errors:[]},s=s[l],u++}}};return o(this),r}static assert(t){if(!(t instanceof ye))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,D.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const o of this.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(t(o))):r.push(t(o));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ye.create=e=>new ye(e);const jt=(e,t)=>{let n;switch(e.code){case x.invalid_type:e.received===T.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case x.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,D.jsonStringifyReplacer)}`;break;case x.unrecognized_keys:n=`Unrecognized key(s) in object: ${D.joinValues(e.keys,", ")}`;break;case x.invalid_union:n="Invalid input";break;case x.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${D.joinValues(e.options)}`;break;case x.invalid_enum_value:n=`Invalid enum value. Expected ${D.joinValues(e.options)}, received '${e.received}'`;break;case x.invalid_arguments:n="Invalid function arguments";break;case x.invalid_return_type:n="Invalid function return type";break;case x.invalid_date:n="Invalid date";break;case x.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:D.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case x.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case x.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case x.custom:n="Invalid input";break;case x.invalid_intersection_types:n="Intersection results could not be merged";break;case x.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case x.not_finite:n="Number must be finite";break;default:n=t.defaultError,D.assertNever(e)}return{message:n}};let Ni=jt;function ef(e){Ni=e}function kn(){return Ni}const On=e=>{const{data:t,path:n,errorMaps:r,issueData:o}=e,i=[...n,...o.path||[]],a={...o,path:i};if(o.message!==void 0)return{...o,path:i,message:o.message};let s="";const u=r.filter(l=>!!l).slice().reverse();for(const l of u)s=l(a,{data:t,defaultError:s}).message;return{...o,path:i,message:s}},tf=[];function g(e,t){const n=kn(),r=On({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===jt?void 0:jt].filter(o=>!!o)});e.common.issues.push(r)}class le{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const o of n){if(o.status==="aborted")return j;o.status==="dirty"&&t.dirty(),r.push(o.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const o of n){const i=await o.key,a=await o.value;r.push({key:i,value:a})}return le.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const o of n){const{key:i,value:a}=o;if(i.status==="aborted"||a.status==="aborted")return j;i.status==="dirty"&&t.dirty(),a.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||o.alwaysSet)&&(r[i.value]=a.value)}return{status:t.value,value:r}}}const j=Object.freeze({status:"aborted"}),St=e=>({status:"dirty",value:e}),fe=e=>({status:"valid",value:e}),_r=e=>e.status==="aborted",vr=e=>e.status==="dirty",qt=e=>e.status==="valid",Xt=e=>typeof Promise<"u"&&e instanceof Promise;function Fn(e,t,n,r){if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function Pi(e,t,n,r,o){if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var S;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(S||(S={}));var zt,Vt;class Ie{constructor(t,n,r,o){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=o}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const bo=(e,t)=>{if(qt(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ye(e.common.issues);return this._error=n,this._error}}};function M(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:o}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:o}:{errorMap:(a,s)=>{var u,l;const{message:f}=e;return a.code==="invalid_enum_value"?{message:f??s.defaultError}:typeof s.data>"u"?{message:(u=f??r)!==null&&u!==void 0?u:s.defaultError}:a.code!=="invalid_type"?{message:s.defaultError}:{message:(l=f??n)!==null&&l!==void 0?l:s.defaultError}},description:o}}class L{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return qe(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:qe(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new le,ctx:{common:t.parent.common,data:t.data,parsedType:qe(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Xt(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const o={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:qe(t)},i=this._parseSync({data:t,path:o.path,parent:o});return bo(o,i)}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:qe(t)},o=this._parse({data:t,path:r.path,parent:r}),i=await(Xt(o)?o:Promise.resolve(o));return bo(r,i)}refine(t,n){const r=o=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(o):n;return this._refinement((o,i)=>{const a=t(o),s=()=>i.addIssue({code:x.custom,...r(o)});return typeof Promise<"u"&&a instanceof Promise?a.then(u=>u?!0:(s(),!1)):a?!0:(s(),!1)})}refinement(t,n){return this._refinement((r,o)=>t(r)?!0:(o.addIssue(typeof n=="function"?n(r,o):n),!1))}_refinement(t){return new Ee({schema:this,typeName:P.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return Se.create(this,this._def)}nullable(){return tt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return we.create(this,this._def)}promise(){return Ot.create(this,this._def)}or(t){return en.create([this,t],this._def)}and(t){return tn.create(this,t,this._def)}transform(t){return new Ee({...M(this._def),schema:this,typeName:P.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new sn({...M(this._def),innerType:this,defaultValue:n,typeName:P.ZodDefault})}brand(){return new eo({typeName:P.ZodBranded,type:this,...M(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new cn({...M(this._def),innerType:this,catchValue:n,typeName:P.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return mn.create(this,t)}readonly(){return un.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const nf=/^c[^\s-]{8,}$/i,rf=/^[0-9a-z]+$/,of=/^[0-9A-HJKMNP-TV-Z]{26}$/,af=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,sf=/^[a-z0-9_-]{21}$/i,cf=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,uf=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,lf="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let or;const ff=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,df=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,hf=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ji="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",mf=new RegExp(`^${ji}$`);function ki(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function pf(e){return new RegExp(`^${ki(e)}$`)}function Oi(e){let t=`${ji}T${ki(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function yf(e,t){return!!((t==="v4"||!t)&&ff.test(e)||(t==="v6"||!t)&&df.test(e))}class ge extends L{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==T.string){const i=this._getOrReturnCtx(t);return g(i,{code:x.invalid_type,expected:T.string,received:i.parsedType}),j}const r=new le;let o;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(o=this._getOrReturnCtx(t,o),g(o,{code:x.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(o=this._getOrReturnCtx(t,o),g(o,{code:x.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const a=t.data.length>i.value,s=t.data.length<i.value;(a||s)&&(o=this._getOrReturnCtx(t,o),a?g(o,{code:x.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&g(o,{code:x.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")uf.test(t.data)||(o=this._getOrReturnCtx(t,o),g(o,{validation:"email",code:x.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")or||(or=new RegExp(lf,"u")),or.test(t.data)||(o=this._getOrReturnCtx(t,o),g(o,{validation:"emoji",code:x.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")af.test(t.data)||(o=this._getOrReturnCtx(t,o),g(o,{validation:"uuid",code:x.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")sf.test(t.data)||(o=this._getOrReturnCtx(t,o),g(o,{validation:"nanoid",code:x.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")nf.test(t.data)||(o=this._getOrReturnCtx(t,o),g(o,{validation:"cuid",code:x.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")rf.test(t.data)||(o=this._getOrReturnCtx(t,o),g(o,{validation:"cuid2",code:x.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")of.test(t.data)||(o=this._getOrReturnCtx(t,o),g(o,{validation:"ulid",code:x.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{o=this._getOrReturnCtx(t,o),g(o,{validation:"url",code:x.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(o=this._getOrReturnCtx(t,o),g(o,{validation:"regex",code:x.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(o=this._getOrReturnCtx(t,o),g(o,{code:x.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(o=this._getOrReturnCtx(t,o),g(o,{code:x.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(o=this._getOrReturnCtx(t,o),g(o,{code:x.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Oi(i).test(t.data)||(o=this._getOrReturnCtx(t,o),g(o,{code:x.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?mf.test(t.data)||(o=this._getOrReturnCtx(t,o),g(o,{code:x.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?pf(i).test(t.data)||(o=this._getOrReturnCtx(t,o),g(o,{code:x.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?cf.test(t.data)||(o=this._getOrReturnCtx(t,o),g(o,{validation:"duration",code:x.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?yf(t.data,i.version)||(o=this._getOrReturnCtx(t,o),g(o,{validation:"ip",code:x.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?hf.test(t.data)||(o=this._getOrReturnCtx(t,o),g(o,{validation:"base64",code:x.invalid_string,message:i.message}),r.dirty()):D.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(o=>t.test(o),{validation:n,code:x.invalid_string,...S.errToObj(r)})}_addCheck(t){return new ge({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...S.errToObj(t)})}url(t){return this._addCheck({kind:"url",...S.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...S.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...S.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...S.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...S.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...S.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...S.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...S.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...S.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...S.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...S.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...S.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...S.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...S.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...S.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...S.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...S.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...S.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...S.errToObj(n)})}nonempty(t){return this.min(1,S.errToObj(t))}trim(){return new ge({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ge({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ge({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}ge.create=e=>{var t;return new ge({checks:[],typeName:P.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...M(e)})};function _f(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,o=n>r?n:r,i=parseInt(e.toFixed(o).replace(".","")),a=parseInt(t.toFixed(o).replace(".",""));return i%a/Math.pow(10,o)}class Ke extends L{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==T.number){const i=this._getOrReturnCtx(t);return g(i,{code:x.invalid_type,expected:T.number,received:i.parsedType}),j}let r;const o=new le;for(const i of this._def.checks)i.kind==="int"?D.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),g(r,{code:x.invalid_type,expected:"integer",received:"float",message:i.message}),o.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),g(r,{code:x.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),g(r,{code:x.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),o.dirty()):i.kind==="multipleOf"?_f(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),g(r,{code:x.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),g(r,{code:x.not_finite,message:i.message}),o.dirty()):D.assertNever(i);return{status:o.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,S.toString(n))}gt(t,n){return this.setLimit("min",t,!1,S.toString(n))}lte(t,n){return this.setLimit("max",t,!0,S.toString(n))}lt(t,n){return this.setLimit("max",t,!1,S.toString(n))}setLimit(t,n,r,o){return new Ke({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:S.toString(o)}]})}_addCheck(t){return new Ke({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:S.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:S.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:S.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:S.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:S.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:S.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:S.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:S.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:S.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&D.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Ke.create=e=>new Ke({checks:[],typeName:P.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...M(e)});class Qe extends L{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==T.bigint){const i=this._getOrReturnCtx(t);return g(i,{code:x.invalid_type,expected:T.bigint,received:i.parsedType}),j}let r;const o=new le;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),g(r,{code:x.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),o.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),g(r,{code:x.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),o.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),g(r,{code:x.not_multiple_of,multipleOf:i.value,message:i.message}),o.dirty()):D.assertNever(i);return{status:o.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,S.toString(n))}gt(t,n){return this.setLimit("min",t,!1,S.toString(n))}lte(t,n){return this.setLimit("max",t,!0,S.toString(n))}lt(t,n){return this.setLimit("max",t,!1,S.toString(n))}setLimit(t,n,r,o){return new Qe({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:S.toString(o)}]})}_addCheck(t){return new Qe({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:S.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:S.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:S.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:S.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:S.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Qe.create=e=>{var t;return new Qe({checks:[],typeName:P.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...M(e)})};class Jt extends L{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==T.boolean){const r=this._getOrReturnCtx(t);return g(r,{code:x.invalid_type,expected:T.boolean,received:r.parsedType}),j}return fe(t.data)}}Jt.create=e=>new Jt({typeName:P.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...M(e)});class bt extends L{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==T.date){const i=this._getOrReturnCtx(t);return g(i,{code:x.invalid_type,expected:T.date,received:i.parsedType}),j}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return g(i,{code:x.invalid_date}),j}const r=new le;let o;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(o=this._getOrReturnCtx(t,o),g(o,{code:x.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(o=this._getOrReturnCtx(t,o),g(o,{code:x.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):D.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new bt({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:S.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:S.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}bt.create=e=>new bt({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:P.ZodDate,...M(e)});class Mn extends L{_parse(t){if(this._getType(t)!==T.symbol){const r=this._getOrReturnCtx(t);return g(r,{code:x.invalid_type,expected:T.symbol,received:r.parsedType}),j}return fe(t.data)}}Mn.create=e=>new Mn({typeName:P.ZodSymbol,...M(e)});class Kt extends L{_parse(t){if(this._getType(t)!==T.undefined){const r=this._getOrReturnCtx(t);return g(r,{code:x.invalid_type,expected:T.undefined,received:r.parsedType}),j}return fe(t.data)}}Kt.create=e=>new Kt({typeName:P.ZodUndefined,...M(e)});class Qt extends L{_parse(t){if(this._getType(t)!==T.null){const r=this._getOrReturnCtx(t);return g(r,{code:x.invalid_type,expected:T.null,received:r.parsedType}),j}return fe(t.data)}}Qt.create=e=>new Qt({typeName:P.ZodNull,...M(e)});class kt extends L{constructor(){super(...arguments),this._any=!0}_parse(t){return fe(t.data)}}kt.create=e=>new kt({typeName:P.ZodAny,...M(e)});class yt extends L{constructor(){super(...arguments),this._unknown=!0}_parse(t){return fe(t.data)}}yt.create=e=>new yt({typeName:P.ZodUnknown,...M(e)});class Le extends L{_parse(t){const n=this._getOrReturnCtx(t);return g(n,{code:x.invalid_type,expected:T.never,received:n.parsedType}),j}}Le.create=e=>new Le({typeName:P.ZodNever,...M(e)});class Un extends L{_parse(t){if(this._getType(t)!==T.undefined){const r=this._getOrReturnCtx(t);return g(r,{code:x.invalid_type,expected:T.void,received:r.parsedType}),j}return fe(t.data)}}Un.create=e=>new Un({typeName:P.ZodVoid,...M(e)});class we extends L{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),o=this._def;if(n.parsedType!==T.array)return g(n,{code:x.invalid_type,expected:T.array,received:n.parsedType}),j;if(o.exactLength!==null){const a=n.data.length>o.exactLength.value,s=n.data.length<o.exactLength.value;(a||s)&&(g(n,{code:a?x.too_big:x.too_small,minimum:s?o.exactLength.value:void 0,maximum:a?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),r.dirty())}if(o.minLength!==null&&n.data.length<o.minLength.value&&(g(n,{code:x.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),r.dirty()),o.maxLength!==null&&n.data.length>o.maxLength.value&&(g(n,{code:x.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,s)=>o.type._parseAsync(new Ie(n,a,n.path,s)))).then(a=>le.mergeArray(r,a));const i=[...n.data].map((a,s)=>o.type._parseSync(new Ie(n,a,n.path,s)));return le.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new we({...this._def,minLength:{value:t,message:S.toString(n)}})}max(t,n){return new we({...this._def,maxLength:{value:t,message:S.toString(n)}})}length(t,n){return new we({...this._def,exactLength:{value:t,message:S.toString(n)}})}nonempty(t){return this.min(1,t)}}we.create=(e,t)=>new we({type:e,minLength:null,maxLength:null,exactLength:null,typeName:P.ZodArray,...M(t)});function At(e){if(e instanceof X){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Se.create(At(r))}return new X({...e._def,shape:()=>t})}else return e instanceof we?new we({...e._def,type:At(e.element)}):e instanceof Se?Se.create(At(e.unwrap())):e instanceof tt?tt.create(At(e.unwrap())):e instanceof Re?Re.create(e.items.map(t=>At(t))):e}class X extends L{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=D.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==T.object){const l=this._getOrReturnCtx(t);return g(l,{code:x.invalid_type,expected:T.object,received:l.parsedType}),j}const{status:r,ctx:o}=this._processInputParams(t),{shape:i,keys:a}=this._getCached(),s=[];if(!(this._def.catchall instanceof Le&&this._def.unknownKeys==="strip"))for(const l in o.data)a.includes(l)||s.push(l);const u=[];for(const l of a){const f=i[l],h=o.data[l];u.push({key:{status:"valid",value:l},value:f._parse(new Ie(o,h,o.path,l)),alwaysSet:l in o.data})}if(this._def.catchall instanceof Le){const l=this._def.unknownKeys;if(l==="passthrough")for(const f of s)u.push({key:{status:"valid",value:f},value:{status:"valid",value:o.data[f]}});else if(l==="strict")s.length>0&&(g(o,{code:x.unrecognized_keys,keys:s}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const f of s){const h=o.data[f];u.push({key:{status:"valid",value:f},value:l._parse(new Ie(o,h,o.path,f)),alwaysSet:f in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const l=[];for(const f of u){const h=await f.key,d=await f.value;l.push({key:h,value:d,alwaysSet:f.alwaysSet})}return l}).then(l=>le.mergeObjectSync(r,l)):le.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(t){return S.errToObj,new X({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var o,i,a,s;const u=(a=(i=(o=this._def).errorMap)===null||i===void 0?void 0:i.call(o,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(s=S.errToObj(t).message)!==null&&s!==void 0?s:u}:{message:u}}}:{}})}strip(){return new X({...this._def,unknownKeys:"strip"})}passthrough(){return new X({...this._def,unknownKeys:"passthrough"})}extend(t){return new X({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new X({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:P.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new X({...this._def,catchall:t})}pick(t){const n={};return D.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new X({...this._def,shape:()=>n})}omit(t){const n={};return D.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new X({...this._def,shape:()=>n})}deepPartial(){return At(this)}partial(t){const n={};return D.objectKeys(this.shape).forEach(r=>{const o=this.shape[r];t&&!t[r]?n[r]=o:n[r]=o.optional()}),new X({...this._def,shape:()=>n})}required(t){const n={};return D.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Se;)i=i._def.innerType;n[r]=i}}),new X({...this._def,shape:()=>n})}keyof(){return Fi(D.objectKeys(this.shape))}}X.create=(e,t)=>new X({shape:()=>e,unknownKeys:"strip",catchall:Le.create(),typeName:P.ZodObject,...M(t)});X.strictCreate=(e,t)=>new X({shape:()=>e,unknownKeys:"strict",catchall:Le.create(),typeName:P.ZodObject,...M(t)});X.lazycreate=(e,t)=>new X({shape:e,unknownKeys:"strip",catchall:Le.create(),typeName:P.ZodObject,...M(t)});class en extends L{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function o(i){for(const s of i)if(s.result.status==="valid")return s.result;for(const s of i)if(s.result.status==="dirty")return n.common.issues.push(...s.ctx.common.issues),s.result;const a=i.map(s=>new ye(s.ctx.common.issues));return g(n,{code:x.invalid_union,unionErrors:a}),j}if(n.common.async)return Promise.all(r.map(async i=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(o);{let i;const a=[];for(const u of r){const l={...n,common:{...n.common,issues:[]},parent:null},f=u._parseSync({data:n.data,path:n.path,parent:l});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const s=a.map(u=>new ye(u));return g(n,{code:x.invalid_union,unionErrors:s}),j}}get options(){return this._def.options}}en.create=(e,t)=>new en({options:e,typeName:P.ZodUnion,...M(t)});const Fe=e=>e instanceof rn?Fe(e.schema):e instanceof Ee?Fe(e.innerType()):e instanceof on?[e.value]:e instanceof et?e.options:e instanceof an?D.objectValues(e.enum):e instanceof sn?Fe(e._def.innerType):e instanceof Kt?[void 0]:e instanceof Qt?[null]:e instanceof Se?[void 0,...Fe(e.unwrap())]:e instanceof tt?[null,...Fe(e.unwrap())]:e instanceof eo||e instanceof un?Fe(e.unwrap()):e instanceof cn?Fe(e._def.innerType):[];class Qn extends L{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==T.object)return g(n,{code:x.invalid_type,expected:T.object,received:n.parsedType}),j;const r=this.discriminator,o=n.data[r],i=this.optionsMap.get(o);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(g(n,{code:x.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),j)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const o=new Map;for(const i of n){const a=Fe(i.shape[t]);if(!a.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const s of a){if(o.has(s))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(s)}`);o.set(s,i)}}return new Qn({typeName:P.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:o,...M(r)})}}function br(e,t){const n=qe(e),r=qe(t);if(e===t)return{valid:!0,data:e};if(n===T.object&&r===T.object){const o=D.objectKeys(t),i=D.objectKeys(e).filter(s=>o.indexOf(s)!==-1),a={...e,...t};for(const s of i){const u=br(e[s],t[s]);if(!u.valid)return{valid:!1};a[s]=u.data}return{valid:!0,data:a}}else if(n===T.array&&r===T.array){if(e.length!==t.length)return{valid:!1};const o=[];for(let i=0;i<e.length;i++){const a=e[i],s=t[i],u=br(a,s);if(!u.valid)return{valid:!1};o.push(u.data)}return{valid:!0,data:o}}else return n===T.date&&r===T.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class tn extends L{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),o=(i,a)=>{if(_r(i)||_r(a))return j;const s=br(i.value,a.value);return s.valid?((vr(i)||vr(a))&&n.dirty(),{status:n.value,value:s.data}):(g(r,{code:x.invalid_intersection_types}),j)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,a])=>o(i,a)):o(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}tn.create=(e,t,n)=>new tn({left:e,right:t,typeName:P.ZodIntersection,...M(n)});class Re extends L{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==T.array)return g(r,{code:x.invalid_type,expected:T.array,received:r.parsedType}),j;if(r.data.length<this._def.items.length)return g(r,{code:x.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),j;!this._def.rest&&r.data.length>this._def.items.length&&(g(r,{code:x.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((a,s)=>{const u=this._def.items[s]||this._def.rest;return u?u._parse(new Ie(r,a,r.path,s)):null}).filter(a=>!!a);return r.common.async?Promise.all(i).then(a=>le.mergeArray(n,a)):le.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new Re({...this._def,rest:t})}}Re.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Re({items:e,typeName:P.ZodTuple,rest:null,...M(t)})};class nn extends L{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==T.object)return g(r,{code:x.invalid_type,expected:T.object,received:r.parsedType}),j;const o=[],i=this._def.keyType,a=this._def.valueType;for(const s in r.data)o.push({key:i._parse(new Ie(r,s,r.path,s)),value:a._parse(new Ie(r,r.data[s],r.path,s)),alwaysSet:s in r.data});return r.common.async?le.mergeObjectAsync(n,o):le.mergeObjectSync(n,o)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof L?new nn({keyType:t,valueType:n,typeName:P.ZodRecord,...M(r)}):new nn({keyType:ge.create(),valueType:t,typeName:P.ZodRecord,...M(n)})}}class Ln extends L{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==T.map)return g(r,{code:x.invalid_type,expected:T.map,received:r.parsedType}),j;const o=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([s,u],l)=>({key:o._parse(new Ie(r,s,r.path,[l,"key"])),value:i._parse(new Ie(r,u,r.path,[l,"value"]))}));if(r.common.async){const s=new Map;return Promise.resolve().then(async()=>{for(const u of a){const l=await u.key,f=await u.value;if(l.status==="aborted"||f.status==="aborted")return j;(l.status==="dirty"||f.status==="dirty")&&n.dirty(),s.set(l.value,f.value)}return{status:n.value,value:s}})}else{const s=new Map;for(const u of a){const l=u.key,f=u.value;if(l.status==="aborted"||f.status==="aborted")return j;(l.status==="dirty"||f.status==="dirty")&&n.dirty(),s.set(l.value,f.value)}return{status:n.value,value:s}}}}Ln.create=(e,t,n)=>new Ln({valueType:t,keyType:e,typeName:P.ZodMap,...M(n)});class xt extends L{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==T.set)return g(r,{code:x.invalid_type,expected:T.set,received:r.parsedType}),j;const o=this._def;o.minSize!==null&&r.data.size<o.minSize.value&&(g(r,{code:x.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),n.dirty()),o.maxSize!==null&&r.data.size>o.maxSize.value&&(g(r,{code:x.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),n.dirty());const i=this._def.valueType;function a(u){const l=new Set;for(const f of u){if(f.status==="aborted")return j;f.status==="dirty"&&n.dirty(),l.add(f.value)}return{status:n.value,value:l}}const s=[...r.data.values()].map((u,l)=>i._parse(new Ie(r,u,r.path,l)));return r.common.async?Promise.all(s).then(u=>a(u)):a(s)}min(t,n){return new xt({...this._def,minSize:{value:t,message:S.toString(n)}})}max(t,n){return new xt({...this._def,maxSize:{value:t,message:S.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}xt.create=(e,t)=>new xt({valueType:e,minSize:null,maxSize:null,typeName:P.ZodSet,...M(t)});class Ct extends L{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==T.function)return g(n,{code:x.invalid_type,expected:T.function,received:n.parsedType}),j;function r(s,u){return On({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,kn(),jt].filter(l=>!!l),issueData:{code:x.invalid_arguments,argumentsError:u}})}function o(s,u){return On({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,kn(),jt].filter(l=>!!l),issueData:{code:x.invalid_return_type,returnTypeError:u}})}const i={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof Ot){const s=this;return fe(async function(...u){const l=new ye([]),f=await s._def.args.parseAsync(u,i).catch(_=>{throw l.addIssue(r(u,_)),l}),h=await Reflect.apply(a,this,f);return await s._def.returns._def.type.parseAsync(h,i).catch(_=>{throw l.addIssue(o(h,_)),l})})}else{const s=this;return fe(function(...u){const l=s._def.args.safeParse(u,i);if(!l.success)throw new ye([r(u,l.error)]);const f=Reflect.apply(a,this,l.data),h=s._def.returns.safeParse(f,i);if(!h.success)throw new ye([o(f,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Ct({...this._def,args:Re.create(t).rest(yt.create())})}returns(t){return new Ct({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new Ct({args:t||Re.create([]).rest(yt.create()),returns:n||yt.create(),typeName:P.ZodFunction,...M(r)})}}class rn extends L{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}rn.create=(e,t)=>new rn({getter:e,typeName:P.ZodLazy,...M(t)});class on extends L{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return g(n,{received:n.data,code:x.invalid_literal,expected:this._def.value}),j}return{status:"valid",value:t.data}}get value(){return this._def.value}}on.create=(e,t)=>new on({value:e,typeName:P.ZodLiteral,...M(t)});function Fi(e,t){return new et({values:e,typeName:P.ZodEnum,...M(t)})}class et extends L{constructor(){super(...arguments),zt.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return g(n,{expected:D.joinValues(r),received:n.parsedType,code:x.invalid_type}),j}if(Fn(this,zt)||Pi(this,zt,new Set(this._def.values)),!Fn(this,zt).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return g(n,{received:n.data,code:x.invalid_enum_value,options:r}),j}return fe(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return et.create(t,{...this._def,...n})}exclude(t,n=this._def){return et.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}zt=new WeakMap;et.create=Fi;class an extends L{constructor(){super(...arguments),Vt.set(this,void 0)}_parse(t){const n=D.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==T.string&&r.parsedType!==T.number){const o=D.objectValues(n);return g(r,{expected:D.joinValues(o),received:r.parsedType,code:x.invalid_type}),j}if(Fn(this,Vt)||Pi(this,Vt,new Set(D.getValidEnumValues(this._def.values))),!Fn(this,Vt).has(t.data)){const o=D.objectValues(n);return g(r,{received:r.data,code:x.invalid_enum_value,options:o}),j}return fe(t.data)}get enum(){return this._def.values}}Vt=new WeakMap;an.create=(e,t)=>new an({values:e,typeName:P.ZodNativeEnum,...M(t)});class Ot extends L{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==T.promise&&n.common.async===!1)return g(n,{code:x.invalid_type,expected:T.promise,received:n.parsedType}),j;const r=n.parsedType===T.promise?n.data:Promise.resolve(n.data);return fe(r.then(o=>this._def.type.parseAsync(o,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ot.create=(e,t)=>new Ot({type:e,typeName:P.ZodPromise,...M(t)});class Ee extends L{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===P.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),o=this._def.effect||null,i={addIssue:a=>{g(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),o.type==="preprocess"){const a=o.transform(r.data,i);if(r.common.async)return Promise.resolve(a).then(async s=>{if(n.value==="aborted")return j;const u=await this._def.schema._parseAsync({data:s,path:r.path,parent:r});return u.status==="aborted"?j:u.status==="dirty"||n.value==="dirty"?St(u.value):u});{if(n.value==="aborted")return j;const s=this._def.schema._parseSync({data:a,path:r.path,parent:r});return s.status==="aborted"?j:s.status==="dirty"||n.value==="dirty"?St(s.value):s}}if(o.type==="refinement"){const a=s=>{const u=o.refinement(s,i);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?j:(s.status==="dirty"&&n.dirty(),a(s.value),{status:n.value,value:s.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>s.status==="aborted"?j:(s.status==="dirty"&&n.dirty(),a(s.value).then(()=>({status:n.value,value:s.value}))))}if(o.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!qt(a))return a;const s=o.transform(a.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:s}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>qt(a)?Promise.resolve(o.transform(a.value,i)).then(s=>({status:n.value,value:s})):a);D.assertNever(o)}}Ee.create=(e,t,n)=>new Ee({schema:e,typeName:P.ZodEffects,effect:t,...M(n)});Ee.createWithPreprocess=(e,t,n)=>new Ee({schema:t,effect:{type:"preprocess",transform:e},typeName:P.ZodEffects,...M(n)});class Se extends L{_parse(t){return this._getType(t)===T.undefined?fe(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Se.create=(e,t)=>new Se({innerType:e,typeName:P.ZodOptional,...M(t)});class tt extends L{_parse(t){return this._getType(t)===T.null?fe(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}tt.create=(e,t)=>new tt({innerType:e,typeName:P.ZodNullable,...M(t)});class sn extends L{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===T.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}sn.create=(e,t)=>new sn({innerType:e,typeName:P.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...M(t)});class cn extends L{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},o=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Xt(o)?o.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ye(r.common.issues)},input:r.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new ye(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}cn.create=(e,t)=>new cn({innerType:e,typeName:P.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...M(t)});class Bn extends L{_parse(t){if(this._getType(t)!==T.nan){const r=this._getOrReturnCtx(t);return g(r,{code:x.invalid_type,expected:T.nan,received:r.parsedType}),j}return{status:"valid",value:t.data}}}Bn.create=e=>new Bn({typeName:P.ZodNaN,...M(e)});const vf=Symbol("zod_brand");class eo extends L{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class mn extends L{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?j:i.status==="dirty"?(n.dirty(),St(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const o=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?j:o.status==="dirty"?(n.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:r.path,parent:r})}}static create(t,n){return new mn({in:t,out:n,typeName:P.ZodPipeline})}}class un extends L{_parse(t){const n=this._def.innerType._parse(t),r=o=>(qt(o)&&(o.value=Object.freeze(o.value)),o);return Xt(n)?n.then(o=>r(o)):r(n)}unwrap(){return this._def.innerType}}un.create=(e,t)=>new un({innerType:e,typeName:P.ZodReadonly,...M(t)});function Mi(e,t={},n){return e?kt.create().superRefine((r,o)=>{var i,a;if(!e(r)){const s=typeof t=="function"?t(r):typeof t=="string"?{message:t}:t,u=(a=(i=s.fatal)!==null&&i!==void 0?i:n)!==null&&a!==void 0?a:!0,l=typeof s=="string"?{message:s}:s;o.addIssue({code:"custom",...l,fatal:u})}}):kt.create()}const bf={object:X.lazycreate};var P;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(P||(P={}));const xf=(e,t={message:`Input not instance of ${e.name}`})=>Mi(n=>n instanceof e,t),Ui=ge.create,Li=Ke.create,gf=Bn.create,Tf=Qe.create,Bi=Jt.create,wf=bt.create,Ef=Mn.create,Af=Kt.create,Sf=Qt.create,If=kt.create,Rf=yt.create,Cf=Le.create,Nf=Un.create,Pf=we.create,jf=X.create,kf=X.strictCreate,Of=en.create,Ff=Qn.create,Mf=tn.create,Uf=Re.create,Lf=nn.create,Bf=Ln.create,zf=xt.create,Vf=Ct.create,Df=rn.create,$f=on.create,Zf=et.create,Gf=an.create,Hf=Ot.create,xo=Ee.create,Wf=Se.create,Yf=tt.create,qf=Ee.createWithPreprocess,Xf=mn.create,Jf=()=>Ui().optional(),Kf=()=>Li().optional(),Qf=()=>Bi().optional(),ed={string:e=>ge.create({...e,coerce:!0}),number:e=>Ke.create({...e,coerce:!0}),boolean:e=>Jt.create({...e,coerce:!0}),bigint:e=>Qe.create({...e,coerce:!0}),date:e=>bt.create({...e,coerce:!0})},td=j;var c=Object.freeze({__proto__:null,defaultErrorMap:jt,setErrorMap:ef,getErrorMap:kn,makeIssue:On,EMPTY_PATH:tf,addIssueToContext:g,ParseStatus:le,INVALID:j,DIRTY:St,OK:fe,isAborted:_r,isDirty:vr,isValid:qt,isAsync:Xt,get util(){return D},get objectUtil(){return yr},ZodParsedType:T,getParsedType:qe,ZodType:L,datetimeRegex:Oi,ZodString:ge,ZodNumber:Ke,ZodBigInt:Qe,ZodBoolean:Jt,ZodDate:bt,ZodSymbol:Mn,ZodUndefined:Kt,ZodNull:Qt,ZodAny:kt,ZodUnknown:yt,ZodNever:Le,ZodVoid:Un,ZodArray:we,ZodObject:X,ZodUnion:en,ZodDiscriminatedUnion:Qn,ZodIntersection:tn,ZodTuple:Re,ZodRecord:nn,ZodMap:Ln,ZodSet:xt,ZodFunction:Ct,ZodLazy:rn,ZodLiteral:on,ZodEnum:et,ZodNativeEnum:an,ZodPromise:Ot,ZodEffects:Ee,ZodTransformer:Ee,ZodOptional:Se,ZodNullable:tt,ZodDefault:sn,ZodCatch:cn,ZodNaN:Bn,BRAND:vf,ZodBranded:eo,ZodPipeline:mn,ZodReadonly:un,custom:Mi,Schema:L,ZodSchema:L,late:bf,get ZodFirstPartyTypeKind(){return P},coerce:ed,any:If,array:Pf,bigint:Tf,boolean:Bi,date:wf,discriminatedUnion:Ff,effect:xo,enum:Zf,function:Vf,instanceof:xf,intersection:Mf,lazy:Df,literal:$f,map:Bf,nan:gf,nativeEnum:Gf,never:Cf,null:Sf,nullable:Yf,number:Li,object:jf,oboolean:Qf,onumber:Kf,optional:Wf,ostring:Jf,pipeline:Xf,preprocess:qf,promise:Hf,record:Lf,set:zf,strictObject:kf,string:Ui,symbol:Ef,transformer:xo,tuple:Uf,undefined:Af,union:Of,unknown:Rf,void:Nf,NEVER:td,ZodIssueCode:x,quotelessJson:Ql,ZodError:ye});const nd=c.object({extensionsUsed:c.array(c.string()).min(1).describe("Names of glTF extensions used in this asset.").optional(),extensionsRequired:c.array(c.string()).min(1).describe("Names of glTF extensions required to properly load this asset.").optional(),accessors:c.array(c.object({bufferView:c.number().int().gte(0).describe("The index of the bufferView.").optional(),byteOffset:c.number().int().gte(0).describe("The offset relative to the start of the buffer view in bytes.").default(0),componentType:c.union([c.literal(5120).describe("BYTE"),c.literal(5121).describe("UNSIGNED_BYTE"),c.literal(5122).describe("SHORT"),c.literal(5123).describe("UNSIGNED_SHORT"),c.literal(5125).describe("UNSIGNED_INT"),c.literal(5126).describe("FLOAT"),c.number().int()]).describe("The datatype of the accessor's components."),normalized:c.boolean().describe("Specifies whether integer data values are normalized before usage.").default(!1),count:c.number().int().gte(1).describe("The number of elements referenced by this accessor."),type:c.union([c.literal("SCALAR"),c.literal("VEC2"),c.literal("VEC3"),c.literal("VEC4"),c.literal("MAT2"),c.literal("MAT3"),c.literal("MAT4"),c.string()]).describe("Specifies if the accessor's elements are scalars, vectors, or matrices."),max:c.array(c.number()).min(1).max(16).describe("Maximum value of each component in this accessor.").optional(),min:c.array(c.number()).min(1).max(16).describe("Minimum value of each component in this accessor.").optional(),sparse:c.object({count:c.number().int().gte(1).describe("Number of deviating accessor values stored in the sparse array."),indices:c.object({bufferView:c.number().int().gte(0).describe("The index of the buffer view with sparse indices. The referenced buffer view **MUST NOT** have its `target` or `byteStride` properties defined. The buffer view and the optional `byteOffset` **MUST** be aligned to the `componentType` byte length."),byteOffset:c.number().int().gte(0).describe("The offset relative to the start of the buffer view in bytes.").default(0),componentType:c.union([c.literal(5121).describe("UNSIGNED_BYTE"),c.literal(5123).describe("UNSIGNED_SHORT"),c.literal(5125).describe("UNSIGNED_INT"),c.number().int()]).describe("The indices data type."),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()})).describe("An object pointing to a buffer view containing the indices of deviating accessor values. The number of indices is equal to `accessor.sparse.count`. Indices **MUST** strictly increase.").describe("An object pointing to a buffer view containing the indices of deviating accessor values. The number of indices is equal to `count`. Indices **MUST** strictly increase."),values:c.object({bufferView:c.number().int().gte(0).describe("The index of the bufferView with sparse values. The referenced buffer view **MUST NOT** have its `target` or `byteStride` properties defined."),byteOffset:c.number().int().gte(0).describe("The offset relative to the start of the bufferView in bytes.").default(0),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()})).describe("An object pointing to a buffer view containing the deviating accessor values. The number of elements is equal to `accessor.sparse.count` times number of components. The elements have the same component type as the base accessor. The elements are tightly packed. Data **MUST** be aligned following the same rules as the base accessor.").describe("An object pointing to a buffer view containing the deviating accessor values."),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()})).describe("Sparse storage of accessor values that deviate from their initialization value.").describe("Sparse storage of elements that deviate from their initialization value.").optional(),name:c.any().optional(),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({name:c.string().describe("The user-defined name of this object.").optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()}))).describe("A typed view into a buffer view that contains raw binary data.")).min(1).describe("An array of accessors.").optional(),animations:c.array(c.object({channels:c.array(c.object({sampler:c.number().int().gte(0).describe("The index of a sampler in this animation used to compute the value for the target."),target:c.object({node:c.number().int().gte(0).describe("The index of the node to animate. When undefined, the animated object **MAY** be defined by an extension.").optional(),path:c.union([c.literal("translation"),c.literal("rotation"),c.literal("scale"),c.literal("weights"),c.string()]).describe('The name of the node\'s TRS property to animate, or the `"weights"` of the Morph Targets it instantiates. For the `"translation"` property, the values that are provided by the sampler are the translation along the X, Y, and Z axes. For the `"rotation"` property, the values are a quaternion in the order (x, y, z, w), where w is the scalar. For the `"scale"` property, the values are the scaling factors along the X, Y, and Z axes.'),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()})).describe("The descriptor of the animated property.").describe("The descriptor of the animated property."),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()})).describe("An animation channel combines an animation sampler with a target property being animated.")).min(1).describe("An array of animation channels. An animation channel combines an animation sampler with a target property being animated. Different channels of the same animation **MUST NOT** have the same targets."),samplers:c.array(c.object({input:c.number().int().gte(0).describe("The index of an accessor containing keyframe timestamps."),interpolation:c.union([c.literal("LINEAR").describe("The animated values are linearly interpolated between keyframes. When targeting a rotation, spherical linear interpolation (slerp) **SHOULD** be used to interpolate quaternions. The number of output elements **MUST** equal the number of input elements."),c.literal("STEP").describe("The animated values remain constant to the output of the first keyframe, until the next keyframe. The number of output elements **MUST** equal the number of input elements."),c.literal("CUBICSPLINE").describe("The animation's interpolation is computed using a cubic spline with specified tangents. The number of output elements **MUST** equal three times the number of input elements. For each input element, the output stores three elements, an in-tangent, a spline vertex, and an out-tangent. There **MUST** be at least two keyframes when using this interpolation."),c.string()]).describe("Interpolation algorithm.").default("LINEAR"),output:c.number().int().gte(0).describe("The index of an accessor, containing keyframe output values."),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()})).describe("An animation sampler combines timestamps with a sequence of output values and defines an interpolation algorithm.")).min(1).describe("An array of animation samplers. An animation sampler combines timestamps with a sequence of output values and defines an interpolation algorithm."),name:c.any().optional(),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({name:c.string().describe("The user-defined name of this object.").optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()}))).describe("A keyframe animation.")).min(1).describe("An array of keyframe animations.").optional(),asset:c.object({copyright:c.string().describe("A copyright message suitable for display to credit the content creator.").optional(),generator:c.string().describe("Tool that generated this glTF model.  Useful for debugging.").optional(),version:c.string().regex(new RegExp("^[0-9]+\\.[0-9]+$")).describe("The glTF version in the form of `<major>.<minor>` that this asset targets."),minVersion:c.string().regex(new RegExp("^[0-9]+\\.[0-9]+$")).describe("The minimum glTF version in the form of `<major>.<minor>` that this asset targets. This property **MUST NOT** be greater than the asset version.").optional(),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()})).describe("Metadata about the glTF asset.").describe("Metadata about the glTF asset."),buffers:c.array(c.object({uri:c.string().describe("The URI (or IRI) of the buffer.").optional(),byteLength:c.number().int().gte(1).describe("The length of the buffer in bytes."),name:c.any().optional(),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({name:c.string().describe("The user-defined name of this object.").optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()}))).describe("A buffer points to binary geometry, animation, or skins.")).min(1).describe("An array of buffers.").optional(),bufferViews:c.array(c.object({buffer:c.number().int().gte(0).describe("The index of the buffer."),byteOffset:c.number().int().gte(0).describe("The offset into the buffer in bytes.").default(0),byteLength:c.number().int().gte(1).describe("The length of the bufferView in bytes."),byteStride:c.number().int().multipleOf(4).gte(4).lte(252).describe("The stride, in bytes.").optional(),target:c.union([c.literal(34962).describe("ARRAY_BUFFER"),c.literal(34963).describe("ELEMENT_ARRAY_BUFFER"),c.number().int()]).describe("The hint representing the intended GPU buffer type to use with this buffer view.").optional(),name:c.any().optional(),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({name:c.string().describe("The user-defined name of this object.").optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()}))).describe("A view into a buffer generally representing a subset of the buffer.")).min(1).describe("An array of bufferViews.").optional(),cameras:c.array(c.object({orthographic:c.object({xmag:c.number().describe("The floating-point horizontal magnification of the view. This value **MUST NOT** be equal to zero. This value **SHOULD NOT** be negative."),ymag:c.number().describe("The floating-point vertical magnification of the view. This value **MUST NOT** be equal to zero. This value **SHOULD NOT** be negative."),zfar:c.number().gt(0).describe("The floating-point distance to the far clipping plane. This value **MUST NOT** be equal to zero. `zfar` **MUST** be greater than `znear`."),znear:c.number().gte(0).describe("The floating-point distance to the near clipping plane."),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()})).describe("An orthographic camera containing properties to create an orthographic projection matrix.").describe("An orthographic camera containing properties to create an orthographic projection matrix. This property **MUST NOT** be defined when `perspective` is defined.").optional(),perspective:c.object({aspectRatio:c.number().gt(0).describe("The floating-point aspect ratio of the field of view.").optional(),yfov:c.number().gt(0).describe("The floating-point vertical field of view in radians. This value **SHOULD** be less than ."),zfar:c.number().gt(0).describe("The floating-point distance to the far clipping plane.").optional(),znear:c.number().gt(0).describe("The floating-point distance to the near clipping plane."),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()})).describe("A perspective camera containing properties to create a perspective projection matrix.").describe("A perspective camera containing properties to create a perspective projection matrix. This property **MUST NOT** be defined when `orthographic` is defined.").optional(),type:c.union([c.literal("perspective"),c.literal("orthographic"),c.string()]).describe("Specifies if the camera uses a perspective or orthographic projection."),name:c.any().optional(),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({name:c.string().describe("The user-defined name of this object.").optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()}))).describe("A camera's projection.  A node **MAY** reference a camera to apply a transform to place the camera in the scene.")).min(1).describe("An array of cameras.").optional(),images:c.array(c.object({uri:c.string().describe("The URI (or IRI) of the image.").optional(),mimeType:c.union([c.literal("image/jpeg"),c.literal("image/png"),c.string()]).describe("The image's media type. This field **MUST** be defined when `bufferView` is defined.").optional(),bufferView:c.number().int().gte(0).describe("The index of the bufferView that contains the image. This field **MUST NOT** be defined when `uri` is defined.").optional(),name:c.any().optional(),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({name:c.string().describe("The user-defined name of this object.").optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()}))).describe("Image data used to create a texture. Image **MAY** be referenced by an URI (or IRI) or a buffer view index.")).min(1).describe("An array of images.").optional(),materials:c.array(c.object({name:c.any().optional(),extensions:c.any().optional(),extras:c.any().optional(),pbrMetallicRoughness:c.object({baseColorFactor:c.array(c.number().gte(0).lte(1)).min(4).max(4).describe("The factors for the base color of the material.").default([1,1,1,1]),baseColorTexture:c.object({index:c.number().int().gte(0).describe("The index of the texture."),texCoord:c.number().int().gte(0).describe("The set index of texture's TEXCOORD attribute used for texture coordinate mapping.").default(0),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()})).describe("Reference to a texture.").describe("The base color texture.").optional(),metallicFactor:c.number().gte(0).lte(1).describe("The factor for the metalness of the material.").default(1),roughnessFactor:c.number().gte(0).lte(1).describe("The factor for the roughness of the material.").default(1),metallicRoughnessTexture:c.object({index:c.number().int().gte(0).describe("The index of the texture."),texCoord:c.number().int().gte(0).describe("The set index of texture's TEXCOORD attribute used for texture coordinate mapping.").default(0),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()})).describe("Reference to a texture.").describe("The metallic-roughness texture.").optional(),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()})).describe("A set of parameter values that are used to define the metallic-roughness material model from Physically-Based Rendering (PBR) methodology.").describe("A set of parameter values that are used to define the metallic-roughness material model from Physically Based Rendering (PBR) methodology. When undefined, all the default values of `pbrMetallicRoughness` **MUST** apply.").optional(),normalTexture:c.object({index:c.any().optional(),texCoord:c.any().optional(),scale:c.number().describe("The scalar parameter applied to each normal vector of the normal texture.").default(1),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({index:c.number().int().gte(0).describe("The index of the texture."),texCoord:c.number().int().gte(0).describe("The set index of texture's TEXCOORD attribute used for texture coordinate mapping.").default(0),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()})).describe("Reference to a texture.")).describe("The tangent space normal texture.").optional(),occlusionTexture:c.object({index:c.any().optional(),texCoord:c.any().optional(),strength:c.number().gte(0).lte(1).describe("A scalar multiplier controlling the amount of occlusion applied.").default(1),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({index:c.number().int().gte(0).describe("The index of the texture."),texCoord:c.number().int().gte(0).describe("The set index of texture's TEXCOORD attribute used for texture coordinate mapping.").default(0),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()})).describe("Reference to a texture.")).describe("The occlusion texture.").optional(),emissiveTexture:c.object({index:c.number().int().gte(0).describe("The index of the texture."),texCoord:c.number().int().gte(0).describe("The set index of texture's TEXCOORD attribute used for texture coordinate mapping.").default(0),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()})).describe("Reference to a texture.").describe("The emissive texture.").optional(),emissiveFactor:c.array(c.number().gte(0).lte(1)).min(3).max(3).describe("The factors for the emissive color of the material.").default([0,0,0]),alphaMode:c.union([c.literal("OPAQUE").describe("The alpha value is ignored, and the rendered output is fully opaque."),c.literal("MASK").describe('The rendered output is either fully opaque or fully transparent depending on the alpha value and the specified `alphaCutoff` value; the exact appearance of the edges **MAY** be subject to implementation-specific techniques such as "`Alpha-to-Coverage`".'),c.literal("BLEND").describe("The alpha value is used to composite the source and destination areas. The rendered output is combined with the background using the normal painting operation (i.e. the Porter and Duff over operator)."),c.string()]).describe("The alpha rendering mode of the material.").default("OPAQUE"),alphaCutoff:c.number().gte(0).describe("The alpha cutoff value of the material.").default(.5),doubleSided:c.boolean().describe("Specifies whether the material is double sided.").default(!1)}).and(c.object({name:c.string().describe("The user-defined name of this object.").optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()}))).describe("The material appearance of a primitive.")).min(1).describe("An array of materials.").optional(),meshes:c.array(c.object({primitives:c.array(c.object({attributes:c.record(c.number().int().gte(0)).describe("A plain JSON object, where each key corresponds to a mesh attribute semantic and each value is the index of the accessor containing attribute's data."),indices:c.number().int().gte(0).describe("The index of the accessor that contains the vertex indices.").optional(),material:c.number().int().gte(0).describe("The index of the material to apply to this primitive when rendering.").optional(),mode:c.union([c.literal(0).describe("POINTS"),c.literal(1).describe("LINES"),c.literal(2).describe("LINE_LOOP"),c.literal(3).describe("LINE_STRIP"),c.literal(4).describe("TRIANGLES"),c.literal(5).describe("TRIANGLE_STRIP"),c.literal(6).describe("TRIANGLE_FAN"),c.number().int()]).describe("The topology type of primitives to render.").default(4),targets:c.array(c.record(c.number().int().gte(0)).describe("A plain JSON object specifying attributes displacements in a morph target, where each key corresponds to one of the three supported attribute semantic (`POSITION`, `NORMAL`, or `TANGENT`) and each value is the index of the accessor containing the attribute displacements' data.")).min(1).describe("An array of morph targets.").optional(),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()})).describe("Geometry to be rendered with the given material.")).min(1).describe("An array of primitives, each defining geometry to be rendered."),weights:c.array(c.number()).min(1).describe("Array of weights to be applied to the morph targets. The number of array elements **MUST** match the number of morph targets.").optional(),name:c.any().optional(),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({name:c.string().describe("The user-defined name of this object.").optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()}))).describe("A set of primitives to be rendered.  Its global transform is defined by a node that references it.")).min(1).describe("An array of meshes.").optional(),nodes:c.array(c.object({camera:c.number().int().gte(0).describe("The index of the camera referenced by this node.").optional(),children:c.array(c.number().int().gte(0)).min(1).describe("The indices of this node's children.").optional(),skin:c.number().int().gte(0).describe("The index of the skin referenced by this node.").optional(),matrix:c.array(c.number()).min(16).max(16).describe("A floating-point 4x4 transformation matrix stored in column-major order.").default([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),mesh:c.number().int().gte(0).describe("The index of the mesh in this node.").optional(),rotation:c.array(c.number().gte(-1).lte(1)).min(4).max(4).describe("The node's unit quaternion rotation in the order (x, y, z, w), where w is the scalar.").default([0,0,0,1]),scale:c.array(c.number()).min(3).max(3).describe("The node's non-uniform scale, given as the scaling factors along the x, y, and z axes.").default([1,1,1]),translation:c.array(c.number()).min(3).max(3).describe("The node's translation along the x, y, and z axes.").default([0,0,0]),weights:c.array(c.number()).min(1).describe("The weights of the instantiated morph target. The number of array elements **MUST** match the number of morph targets of the referenced mesh. When defined, `mesh` **MUST** also be defined.").optional(),name:c.any().optional(),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({name:c.string().describe("The user-defined name of this object.").optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()}))).describe("A node in the node hierarchy.  When the node contains `skin`, all `mesh.primitives` **MUST** contain `JOINTS_0` and `WEIGHTS_0` attributes.  A node **MAY** have either a `matrix` or any combination of `translation`/`rotation`/`scale` (TRS) properties. TRS properties are converted to matrices and postmultiplied in the `T * R * S` order to compose the transformation matrix; first the scale is applied to the vertices, then the rotation, and then the translation. If none are provided, the transform is the identity. When a node is targeted for animation (referenced by an animation.channel.target), `matrix` **MUST NOT** be present.")).min(1).describe("An array of nodes.").optional(),samplers:c.array(c.object({magFilter:c.union([c.literal(9728).describe("NEAREST"),c.literal(9729).describe("LINEAR"),c.number().int()]).describe("Magnification filter.").optional(),minFilter:c.union([c.literal(9728).describe("NEAREST"),c.literal(9729).describe("LINEAR"),c.literal(9984).describe("NEAREST_MIPMAP_NEAREST"),c.literal(9985).describe("LINEAR_MIPMAP_NEAREST"),c.literal(9986).describe("NEAREST_MIPMAP_LINEAR"),c.literal(9987).describe("LINEAR_MIPMAP_LINEAR"),c.number().int()]).describe("Minification filter.").optional(),wrapS:c.union([c.literal(33071).describe("CLAMP_TO_EDGE"),c.literal(33648).describe("MIRRORED_REPEAT"),c.literal(10497).describe("REPEAT"),c.number().int()]).describe("S (U) wrapping mode.").default(10497),wrapT:c.union([c.literal(33071).describe("CLAMP_TO_EDGE"),c.literal(33648).describe("MIRRORED_REPEAT"),c.literal(10497).describe("REPEAT"),c.number().int()]).describe("T (V) wrapping mode.").default(10497),name:c.any().optional(),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({name:c.string().describe("The user-defined name of this object.").optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()}))).describe("Texture sampler properties for filtering and wrapping modes.")).min(1).describe("An array of samplers.").optional(),scene:c.number().int().gte(0).describe("The index of the default scene.").optional(),scenes:c.array(c.object({nodes:c.array(c.number().int().gte(0)).min(1).describe("The indices of each root node.").optional(),name:c.any().optional(),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({name:c.string().describe("The user-defined name of this object.").optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()}))).describe("The root nodes of a scene.")).min(1).describe("An array of scenes.").optional(),skins:c.array(c.object({inverseBindMatrices:c.number().int().gte(0).describe("The index of the accessor containing the floating-point 4x4 inverse-bind matrices.").optional(),skeleton:c.number().int().gte(0).describe("The index of the node used as a skeleton root.").optional(),joints:c.array(c.number().int().gte(0)).min(1).describe("Indices of skeleton nodes, used as joints in this skin."),name:c.any().optional(),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({name:c.string().describe("The user-defined name of this object.").optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()}))).describe("Joints and matrices defining a skin.")).min(1).describe("An array of skins.").optional(),textures:c.array(c.object({sampler:c.number().int().gte(0).describe("The index of the sampler used by this texture. When undefined, a sampler with repeat wrapping and auto filtering **SHOULD** be used.").optional(),source:c.number().int().gte(0).describe("The index of the image used by this texture. When undefined, an extension or other mechanism **SHOULD** supply an alternate texture source, otherwise behavior is undefined.").optional(),name:c.any().optional(),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({name:c.string().describe("The user-defined name of this object.").optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()}))).describe("A texture and its sampler.")).min(1).describe("An array of textures.").optional(),extensions:c.any().optional(),extras:c.any().optional()}).and(c.object({extensions:c.object({}).catchall(c.record(c.any())).describe("JSON object with extension-specific objects.").optional(),extras:c.any().describe("Application-specific data.").optional()})).describe("The root object for a glTF asset.");async function to(e,t){const n=await zi(t,"json"),r=nd.parse(n);if(!rd(r))throw new Error('Error loading the gltf file. At least the following set of properties is expected to be present: ["meshes", "accessors", "bufferViews", "buffers"]');const o=new Array(r.bufferViews.length),i=new Array(r.buffers.length),a=new URL(t,location.href),s=[];for(const u of r.meshes)for(const l of u.primitives){const f={};for(const[h,d]of Object.entries(l.attributes))f[h]=await go(e,r,d,o,i,a);l.indices!==void 0&&(f.indices=await go(e,r,l.indices,o,i,a)),s.push(f)}return s}function rd(e){return e.meshes!==void 0&&e.accessors!==void 0&&e.bufferViews!==void 0&&e.buffers!==void 0}async function go(e,t,n,r,o,i){const a=t.accessors[n];if(a.bufferView===void 0)throw new Error("No bufferView");if(r[a.bufferView]===void 0){const s=t.bufferViews[a.bufferView];if(o[s.buffer]===void 0){const f=t.buffers[s.buffer];if(f.uri===void 0)throw new Error("No uri");const h=new URL(f.uri,i.href);o[s.buffer]=await zi(h,"arrayBuffer")}const u=o[s.buffer],l=od(e,a.componentType);r[a.bufferView]=new l(u,s.byteOffset+(a.byteOffset??0),a.count*To(a.type))}return{numComponents:To(a.type),data:r[a.bufferView]}}async function zi(e,t){const n=await fetch(e);if(!n.ok)throw new Error(`Could not load ${e}`);return n[t]()}function To(e){switch(e){case"SCALAR":return 1;case"VEC2":return 2;case"VEC3":return 3;case"VEC4":return 4;case"MAT2":return 4;case"MAT3":return 9;case"MAT4":return 16;default:throw new Error("Unknown accessor type")}}function od(e,t){switch(t){case e.BYTE:return Int8Array;case e.UNSIGNED_BYTE:return Uint8Array;case e.SHORT:return Int16Array;case e.UNSIGNED_SHORT:return Uint16Array;case e.INT:return Int32Array;case e.UNSIGNED_INT:return Uint32Array;case e.FLOAT:return Float32Array;default:throw new Error("Unknown component type")}}const id=`#version 300 es

precision mediump float;

in vec2 v_texCoord;
in vec3 v_normal;
in vec3 v_surfaceToLight;
in vec3 v_surfaceToView;

uniform vec4 u_lightColor;
uniform vec4 u_ambient;
uniform sampler2D u_diffuse;
uniform vec4 u_specular;
uniform float u_shininess;
uniform float u_specularFactor;

out vec4 outColor;

vec4 lit(float l, float h, float m) {
  return vec4(1.0f, max(l, 0.0f), (l > 0.0f) ? pow(max(0.0f, h), m) : 0.0f, 1.0f);
}

void main() {
  vec4 diffuseColor = texture(u_diffuse, v_texCoord);
  vec3 a_normal = normalize(v_normal);
  vec3 surfaceToLight = normalize(v_surfaceToLight);
  vec3 surfaceToView = normalize(v_surfaceToView);
  vec3 halfVector = normalize(surfaceToLight + surfaceToView);
  vec4 litR = lit(dot(a_normal, surfaceToLight), dot(a_normal, halfVector), u_shininess);
  outColor = vec4((u_lightColor * (diffuseColor * litR.y + diffuseColor * u_ambient +
    u_specular * litR.z * u_specularFactor)).rgb, diffuseColor.a);
}
`,ad=`#version 300 es

uniform mat4 u_worldViewProjection;
uniform vec3 u_lightWorldPos;
uniform mat4 u_world;
uniform mat4 u_viewInverse;
uniform mat4 u_worldInverseTranspose;

in vec4 a_POSITION;
in vec3 a_NORMAL;
in vec2 a_TEXCOORD_0;

out vec2 v_texCoord;
out vec3 v_normal;
out vec3 v_surfaceToLight;
out vec3 v_surfaceToView;

void main() {
  v_texCoord = a_TEXCOORD_0;
  v_normal = (u_worldInverseTranspose * vec4(a_NORMAL, 0)).xyz;
  v_surfaceToLight = u_lightWorldPos - (u_world * a_POSITION).xyz;
  v_surfaceToView = (u_viewInverse[3] - (u_world * a_POSITION)).xyz;
  gl_Position = u_worldViewProjection * a_POSITION;
}
`;async function sd(e){$e({attribPrefix:"a_"});const t=ze(e,[ad,id]),n=await to(e,"Fox.gltf"),r=cd(n[0]),o=De(e,t,nt(e,r)),i=Ue(e,{min:e.NEAREST,mag:e.NEAREST,src:"Texture.png"}),a={u_lightWorldPos:E(100,50,-333),u_lightColor:N(1,1,1,1),u_ambient:N(.1,.1,.1,1),u_specular:N(.2,.2,.2,1),u_shininess:32,u_specularFactor:1,u_diffuse:i,u_viewInverse:O(1).flat(),u_world:O(1).flat(),u_worldInverseTranspose:O(1).flat(),u_worldViewProjection:O(1).flat()};return s=>{Ze(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);const u=Ge(30),l=e.canvas.clientWidth/e.canvas.clientHeight,d=st(u,l,50,1e3),_=E(100,100,-200),m=E(0,40,-11),p=E(0,1,0),y=at(_,m,p),v=C(d,y),b=ct(O(1),document.timeline.currentTime*1e-4,E(0,1,0));Object.assign(a,{u_viewInverse:me(y).flat(),u_world:b.flat(),u_worldInverseTranspose:Ae(me(b)).flat(),u_worldViewProjection:C(v,b).flat()}),e.useProgram(t.program),je(e,t,o),Be(t,a),Ve(e,o)}}function cd(e){const t=e.POSITION.data,n=new Float32Array(t.length);for(let r=0;r<t.length/3;r+=3){const o=E(...t.slice((r+0)*3,(r+0)*3+3)),i=E(...t.slice((r+1)*3,(r+1)*3+3)),a=E(...t.slice((r+2)*3,(r+2)*3+3)),s=J(i,o),u=J(a,o),l=Yt(jn(s,u));n[(r+0)*3+0]=l[0],n[(r+0)*3+1]=l[1],n[(r+0)*3+2]=l[2],n[(r+1)*3+0]=l[0],n[(r+1)*3+1]=l[1],n[(r+1)*3+2]=l[2],n[(r+2)*3+0]=l[0],n[(r+2)*3+1]=l[1],n[(r+2)*3+2]=l[2]}return{...e,NORMAL:{numComponents:3,data:n}}}const ud=`#version 300 es

precision highp float;

in vec2 v_texCoord;
in vec3 v_normal;
in vec3 v_surfaceToLight;
in vec3 v_surfaceToView;

uniform vec4 u_lightColor;
uniform vec4 u_ambient;
uniform sampler2D u_diffuse;
uniform vec4 u_specular;
uniform float u_shininess;
uniform float u_specularFactor;

out vec4 outColor;

vec4 lit(float l, float h, float m) {
  return vec4(1.0f, max(l, 0.0f), (l > 0.0f) ? pow(max(0.0f, h), m) : 0.0f, 1.0f);
}

void main() {
  vec4 diffuseColor = texture(u_diffuse, v_texCoord);
  vec3 a_normal = normalize(v_normal);
  vec3 surfaceToLight = normalize(v_surfaceToLight);
  vec3 surfaceToView = normalize(v_surfaceToView);
  vec3 halfVector = normalize(surfaceToLight + surfaceToView);
  vec4 litR = lit(dot(a_normal, surfaceToLight), dot(a_normal, halfVector), u_shininess);
  outColor = vec4((u_lightColor * (diffuseColor * litR.y + diffuseColor * u_ambient +
    u_specular * litR.z * u_specularFactor)).rgb, diffuseColor.a);
}
`,ld=`#version 300 es

uniform mat4 u_worldViewProjection;
uniform vec3 u_lightWorldPos;
uniform mat4 u_world;
uniform mat4 u_viewInverse;
uniform mat4 u_worldInverseTranspose;

in vec4 a_position;
in vec3 a_normal;
in vec2 a_texcoord;

out vec2 v_texCoord;
out vec3 v_normal;
out vec3 v_surfaceToLight;
out vec3 v_surfaceToView;

void main() {
  v_texCoord = a_texcoord;
  v_normal = (u_worldInverseTranspose * vec4(a_normal, 0)).xyz;
  v_surfaceToLight = u_lightWorldPos - (u_world * a_position).xyz;
  v_surfaceToView = (u_viewInverse[3] - (u_world * a_position)).xyz;
  gl_Position = u_worldViewProjection * a_position;
}
`;async function fd(e){$e({attribPrefix:"a_"});const t=ze(e,[ld,ud]),n=De(e,t,await dd(e,"heightmap.png",0,1.5,4,4,255,255)),r=Ue(e,{min:e.NEAREST,mag:e.NEAREST,src:"hypsometric-tint.png"}),o={u_lightWorldPos:E(1,8,-10),u_lightColor:N(1,1,1,1),u_ambient:N(.1,.1,.1,1),u_specular:N(.2,.2,.2,1),u_shininess:32,u_specularFactor:0,u_diffuse:r,u_viewInverse:O(1).flat(),u_world:O(1).flat(),u_worldInverseTranspose:O(1).flat(),u_worldViewProjection:O(1).flat()};return i=>{Ze(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);const a=Ge(30),s=e.canvas.clientWidth/e.canvas.clientHeight,f=st(a,s,.5,10),h=E(1,4,-6),d=E(0,0,0),_=E(0,1,0),m=at(h,d,_),p=C(f,m),y=ct(O(1),document.timeline.currentTime*1e-4,E(0,1,0));Object.assign(o,{u_viewInverse:me(m).flat(),u_world:y.flat(),u_worldInverseTranspose:Ae(me(y)).flat(),u_worldViewProjection:C(p,y).flat()}),e.useProgram(t.program),je(e,t,n),Be(t,o),Ve(e,n)}}async function dd(e,t,n=0,r=1,o=1,i=1,a=1,s=1,u=_a.identity()){const l=await hd(t),f=Nt.createPlaneVertices(o,i,a,s),h=f.position;for(let y=0;y<h.length;y+=3){const[v,b]=[h[y+0],h[y+2]],A=pr(Dt(0,l.width-1,v/o+.5)),w=(pr(Dt(0,l.height-1,b/i+.5))*l.width+A)*4,R=l.data[w+0],U=Dt(n,r,R/255);h[y+1]=U}md(f);const d=f.normal,_=f.texcoord,m=f.indices,p=Nt.reorientVertices({position:h,normal:d,texcoord:_,indices:m},u);return nt(e,p)}async function hd(e){const n=await(await fetch(e)).blob(),r=await createImageBitmap(n),i=new OffscreenCanvas(r.width,r.height).getContext("2d");if(i===null)throw new Error("Cannot create context");return i.drawImage(r,0,0),i.getImageData(0,0,r.width,r.height)}function md(e){const t=e.position,n=e.normal,r=e.indices;for(let o=0;o<r.length;o+=3){const i=E(...t.slice(r[o+0]*3,r[o+0]*3+3)),a=E(...t.slice(r[o+1]*3,r[o+1]*3+3)),s=E(...t.slice(r[o+2]*3,r[o+2]*3+3)),u=J(a,i),l=J(s,i),f=Yt(jn(u,l));n[r[o+0]*3+0]=f[0],n[r[o+0]*3+1]=f[1],n[r[o+0]*3+2]=f[2],n[r[o+1]*3+0]=f[0],n[r[o+1]*3+1]=f[1],n[r[o+1]*3+2]=f[2],n[r[o+2]*3+0]=f[0],n[r[o+2]*3+1]=f[1],n[r[o+2]*3+2]=f[2]}}const pd=`#version 300 es

precision highp float;

in vec2 v_texCoord;
in vec3 v_surfaceToLight;
in vec3 v_surfaceToView;
in vec4 v_position;

uniform vec4 u_lightColor;
uniform vec4 u_ambient;
uniform sampler2D u_diffuse;
uniform vec4 u_specular;
uniform float u_shininess;
uniform float u_specularFactor;
uniform mat4 u_worldInverseTranspose;

out vec4 outColor;

vec4 lit(float l, float h, float m) {
  return vec4(1.0f, max(l, 0.0f), (l > 0.0f) ? pow(max(0.0f, h), m) : 0.0f, 1.0f);
}

void main() {
  vec4 diffuseColor = texture(u_diffuse, v_texCoord);
  vec3 normal = (u_worldInverseTranspose * vec4(cross(dFdx(v_position.xyz), dFdy(v_position.xyz)), 0.0)).xyz;
  vec3 a_normal = normalize(normal);
  vec3 surfaceToLight = normalize(v_surfaceToLight);
  vec3 surfaceToView = normalize(v_surfaceToView);
  vec3 halfVector = normalize(surfaceToLight + surfaceToView);
  vec4 litR = lit(dot(a_normal, surfaceToLight), dot(a_normal, halfVector), u_shininess);
  outColor = vec4((u_lightColor * (diffuseColor * litR.y + diffuseColor * u_ambient +
    u_specular * litR.z * u_specularFactor)).rgb, diffuseColor.a);
}
`,yd=`#version 300 es

uniform mat4 u_worldViewProjection;
uniform vec3 u_lightWorldPos;
uniform mat4 u_world;
uniform mat4 u_viewInverse;
uniform sampler2D u_heightmap;
uniform float u_minElevation;
uniform float u_maxElevation;

in vec4 a_position;
in vec2 a_texcoord;

out vec2 v_texCoord;
out vec3 v_surfaceToLight;
out vec3 v_surfaceToView;
out vec4 v_position;

void main() {
  v_texCoord = a_texcoord;
  v_position = a_position;
  v_position.y = mix(u_minElevation, u_maxElevation, texture(u_heightmap, v_texCoord).r);
  v_surfaceToLight = u_lightWorldPos - (u_world * v_position).xyz;
  v_surfaceToView = (u_viewInverse[3] - (u_world * v_position)).xyz;
  gl_Position = u_worldViewProjection * v_position;
}
`;async function _d(e){$e({attribPrefix:"a_"});const t=ze(e,[yd,pd]),n=De(e,t,Nt.createPlaneBufferInfo(e,4,4,255,255)),r=Ue(e,{min:e.NEAREST,mag:e.NEAREST,src:"hypsometric-tint.png"}),o=Ue(e,{min:e.LINEAR_MIPMAP_LINEAR,mag:e.LINEAR,src:"heightmap.png"}),i={u_lightWorldPos:E(1,8,-10),u_lightColor:N(1,1,1,1),u_ambient:N(.1,.1,.1,1),u_specular:N(.2,.2,.2,1),u_shininess:32,u_specularFactor:0,u_diffuse:r,u_viewInverse:O(1).flat(),u_world:O(1).flat(),u_worldInverseTranspose:O(1).flat(),u_worldViewProjection:O(1).flat(),u_heightmap:o,u_minElevation:0,u_maxElevation:1.5};return a=>{Ze(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);const s=Ge(30),u=e.canvas.clientWidth/e.canvas.clientHeight,h=st(s,u,.5,10),d=E(1,4,-6),_=E(0,0,0),m=E(0,1,0),p=at(d,_,m),y=C(h,p),v=ct(O(1),document.timeline.currentTime*1e-4,E(0,1,0));Object.assign(i,{u_viewInverse:me(p).flat(),u_world:v.flat(),u_worldInverseTranspose:Ae(me(v)).flat(),u_worldViewProjection:C(y,v).flat()}),e.useProgram(t.program),je(e,t,n),Be(t,i),Ve(e,n)}}const vd=`#version 300 es

precision highp float;

in vec2 v_texCoord;
in vec3 v_normal;
in vec3 v_surfaceToLight;
in vec3 v_surfaceToView;

uniform vec4 u_lightColor;
uniform vec4 u_ambient;
uniform sampler2D u_diffuse;
uniform vec4 u_specular;
uniform float u_shininess;
uniform float u_specularFactor;

out vec4 outColor;

vec4 lit(float l, float h, float m) {
  return vec4(1.0f, max(l, 0.0f), (l > 0.0f) ? pow(max(0.0f, h), m) : 0.0f, 1.0f);
}

void main() {
  vec4 diffuseColor = texture(u_diffuse, v_texCoord);
  vec3 a_normal = normalize(v_normal);
  vec3 surfaceToLight = normalize(v_surfaceToLight);
  vec3 surfaceToView = normalize(v_surfaceToView);
  vec3 halfVector = normalize(surfaceToLight + surfaceToView);
  vec4 litR = lit(dot(a_normal, surfaceToLight), dot(a_normal, halfVector), u_shininess);
  outColor = vec4((u_lightColor * (diffuseColor * litR.y + diffuseColor * u_ambient +
    u_specular * litR.z * u_specularFactor)).rgb, diffuseColor.a);
}
`,bd=`#version 300 es

uniform mat4 u_worldViewProjection;
uniform vec3 u_lightWorldPos;
uniform mat4 u_world;
uniform mat4 u_viewInverse;
uniform mat4 u_worldInverseTranspose;
uniform sampler2D u_heightmap;
uniform float u_minElevation;
uniform float u_maxElevation;
uniform float u_resolution;
uniform float u_size;

in vec4 a_position;
in vec3 a_normal;
in vec2 a_texcoord;
in vec3 a_tangent;

out vec2 v_texCoord;
out vec3 v_normal;
out vec3 v_surfaceToLight;
out vec3 v_surfaceToView;

void main() {
  v_texCoord = a_texcoord;
  float offset = u_size / u_resolution;
  vec3 normal = a_normal;
  vec3 tangent = a_tangent;
  tangent = tangent - dot(tangent, normal) * normal; // re-orthogonalize tangent with respect to normal
  vec3 bitangent = cross(normal, tangent); // retrieve perpendicular bitangent with the cross product of normal and tangent
  vec3 pos1 = a_position.xyz + normal * mix(u_minElevation, u_maxElevation, texture(u_heightmap, v_texCoord).r);
  vec3 pos2 = a_position.xyz + tangent * offset + normal * mix(u_minElevation, u_maxElevation, texture(u_heightmap, v_texCoord + vec2(offset, 0)).r);
  vec3 pos3 = a_position.xyz + bitangent * offset + normal * mix(u_minElevation, u_maxElevation, texture(u_heightmap, v_texCoord + vec2(0, -offset)).r);
  vec3 edge1 = pos2 - pos1;
  vec3 edge2 = pos3 - pos1;
  normal = cross(edge1, edge2);
  v_normal = (u_worldInverseTranspose * vec4(normal, 0)).xyz;
  v_surfaceToLight = u_lightWorldPos - (u_world * vec4(pos1, 1.0)).xyz;
  v_surfaceToView = (u_viewInverse[3] - (u_world * vec4(pos1, 1.0))).xyz;
  gl_Position = u_worldViewProjection * vec4(pos1, 1.0);
}
`;async function xd(e){$e({attribPrefix:"a_"});const t=ze(e,[bd,vd]),n=gd(Nt.createPlaneVertices(4,4,255,255)),r=De(e,t,nt(e,n)),o=Ue(e,{min:e.NEAREST,mag:e.NEAREST,src:"hypsometric-tint.png"}),i=Ue(e,{min:e.NEAREST_MIPMAP_NEAREST,mag:e.NEAREST,src:"heightmap.png"}),a={u_lightWorldPos:E(1,8,-10),u_lightColor:N(1,1,1,1),u_ambient:N(.1,.1,.1,1),u_specular:N(.2,.2,.2,1),u_shininess:32,u_specularFactor:0,u_diffuse:o,u_viewInverse:O(1).flat(),u_world:O(1).flat(),u_worldInverseTranspose:O(1).flat(),u_worldViewProjection:O(1).flat(),u_heightmap:i,u_minElevation:0,u_maxElevation:1.5,u_resolution:1024,u_size:4};return s=>{Ze(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);const u=Ge(30),l=e.canvas.clientWidth/e.canvas.clientHeight,d=st(u,l,.5,10),_=E(1,4,-6),m=E(0,0,0),p=E(0,1,0),y=at(_,m,p),v=C(d,y),b=ct(O(1),document.timeline.currentTime*1e-4,E(0,1,0));Object.assign(a,{u_viewInverse:me(y).flat(),u_world:b.flat(),u_worldInverseTranspose:Ae(me(b)).flat(),u_worldViewProjection:C(v,b).flat()}),e.useProgram(t.program),je(e,t,r),Be(t,a),Ve(e,r)}}function gd(e){const t=e.position,n=e.normal,r=e.texcoord,o=e.indices,i=new Float32Array(n.length),a=new Array(t.length/3).fill(0);for(let s=0;s<o.length;s+=3){const u=E(...t.slice(o[s+0]*3,o[s+0]*3+3)),l=E(...t.slice(o[s+1]*3,o[s+1]*3+3)),f=E(...t.slice(o[s+2]*3,o[s+2]*3+3)),h=Te(...r.slice(o[s+0]*2,o[s+0]*2+2)),d=Te(...r.slice(o[s+1]*2,o[s+1]*2+2)),_=Te(...r.slice(o[s+2]*2,o[s+2]*2+2)),m=J(l,u),p=J(f,u),y=J(d,h),v=J(_,h),b=1/(y[0]*v[1]-v[0]*y[1]);i[o[s+0]*3+0]+=b*(v[1]*m[0]-y[1]*p[0]),i[o[s+0]*3+1]+=b*(v[1]*m[1]-y[1]*p[1]),i[o[s+0]*3+2]+=b*(v[1]*m[2]-y[1]*p[2]),i[o[s+1]*3+0]+=b*(v[1]*m[0]-y[1]*p[0]),i[o[s+1]*3+1]+=b*(v[1]*m[1]-y[1]*p[1]),i[o[s+1]*3+2]+=b*(v[1]*m[2]-y[1]*p[2]),i[o[s+2]*3+0]+=b*(v[1]*m[0]-y[1]*p[0]),i[o[s+2]*3+1]+=b*(v[1]*m[1]-y[1]*p[1]),i[o[s+2]*3+2]+=b*(v[1]*m[2]-y[1]*p[2]),a[o[s+0]]+=1,a[o[s+1]]+=1,a[o[s+2]]+=1}for(let s=0;s<a.length;s++)i[s*3+0]/=a[s],i[s*3+1]/=a[s],i[s*3+2]/=a[s];return{...e,tangent:i}}const Td=`#version 300 es

precision mediump float;

uniform vec4 u_diffuse;

out vec4 outColor;

void main() {
  outColor = u_diffuse;
}
`,wd=`#version 300 es

uniform mat4 u_worldViewProjection;

in vec4 a_POSITION;
in vec3 a_NORMAL;

void main() {
  vec3 position = a_POSITION.xyz + 0.015 * a_NORMAL;
  gl_Position = u_worldViewProjection * vec4(position, 1.0);
}
`;async function Ed(e){$e({attribPrefix:"a_"});const t=ze(e,[wd,Td]),r=(await to(e,"teapot.gltf"))[0],o=De(e,t,nt(e,r)),i={u_diffuse:N(0,0,0,1),u_worldViewProjection:O(1).flat()};return a=>{Ze(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.cullFace(e.FRONT),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);const s=Ge(30),u=e.canvas.clientWidth/e.canvas.clientHeight,h=st(s,u,5,100),d=E(2,5,-12),_=E(0,0,0),m=E(0,1,0),p=at(d,_,m),y=C(h,p),v=ct(O(1),document.timeline.currentTime*1e-4,E(0,1,0));Object.assign(i,{u_worldViewProjection:C(y,v).flat()}),e.useProgram(t.program),je(e,t,o),Be(t,i),Ve(e,o)}}const Ad=`#version 300 es

precision mediump float;

in vec3 v_normal;
in vec3 v_surfaceToLight;
in vec3 v_surfaceToView;

uniform vec4 u_lightColor;
uniform vec4 u_ambient;
uniform vec4 u_diffuse;
uniform vec4 u_specular;
uniform float u_shininess;
uniform float u_specularFactor;

out vec4 outColor;

vec4 lit(float l, float h, float m) {
  return vec4(1.0f, max(l, 0.0f), (l > 0.0f) ? pow(max(0.0f, h), m) : 0.0f, 1.0f);
}

// float toonifyUnoptimized(float f) {
//   if (f > 0.6) {
//     return 1.0;
//   }
//   if (f > 0.4) {
//     return 0.6;
//   }
//   if (f > 0.2) {
//     return 0.3;
//   }
//   return 0.1;
// }

float toonify(float f) {
  return 0.1 - 0.1 * step(0.2, f) + 0.3 * step(0.2, f) - 0.3 * step(0.4, f) + 0.6 * step(0.4, f) - 0.6 * step(0.6, f) + step(0.6, f);
}

void main() {
  vec3 a_normal = normalize(v_normal);
  vec3 surfaceToLight = normalize(v_surfaceToLight);
  vec3 surfaceToView = normalize(v_surfaceToView);
  vec3 halfVector = normalize(surfaceToLight + surfaceToView);
  vec4 litR = lit(dot(a_normal, surfaceToLight), dot(a_normal, halfVector), u_shininess);
  outColor = vec4((u_lightColor * (u_diffuse * toonify(litR.y) + u_diffuse * u_ambient +
    u_specular * litR.z * u_specularFactor)).rgb, u_diffuse.a);
}
`,Sd=`#version 300 es

uniform mat4 u_worldViewProjection;
uniform vec3 u_lightWorldPos;
uniform mat4 u_world;
uniform mat4 u_viewInverse;
uniform mat4 u_worldInverseTranspose;

in vec4 a_POSITION;
in vec3 a_NORMAL;

out vec2 v_texCoord;
out vec3 v_normal;
out vec3 v_surfaceToLight;
out vec3 v_surfaceToView;

void main() {
  v_normal = (u_worldInverseTranspose * vec4(a_NORMAL, 0)).xyz;
  v_surfaceToLight = u_lightWorldPos - (u_world * a_POSITION).xyz;
  v_surfaceToView = (u_viewInverse[3] - (u_world * a_POSITION)).xyz;
  gl_Position = u_worldViewProjection * a_POSITION;
}
`;async function Id(e){$e({attribPrefix:"a_"});const t=ze(e,[Sd,Ad]),r=(await to(e,"teapot.gltf"))[0],o=De(e,t,nt(e,r)),i={u_lightWorldPos:E(10,5,-5),u_lightColor:N(1,1,1,1),u_ambient:N(.1,.1,.1,1),u_specular:N(.2,.2,.2,1),u_shininess:32,u_specularFactor:0,u_diffuse:N(.588,1,0,1),u_viewInverse:O(1).flat(),u_world:O(1).flat(),u_worldInverseTranspose:O(1).flat(),u_worldViewProjection:O(1).flat()};return a=>{Ze(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.enable(e.DEPTH_TEST),e.disable(e.CULL_FACE);const s=Ge(30),u=e.canvas.clientWidth/e.canvas.clientHeight,h=st(s,u,5,100),d=E(2,5,-12),_=E(0,0,0),m=E(0,1,0),p=at(d,_,m),y=C(h,p),v=ct(O(1),document.timeline.currentTime*1e-4,E(0,1,0));Object.assign(i,{u_viewInverse:me(p).flat(),u_world:v.flat(),u_worldInverseTranspose:Ae(me(v)).flat(),u_worldViewProjection:C(y,v).flat()}),e.useProgram(t.program),je(e,t,o),Be(t,i),Ve(e,o)}}async function Rd(e){const t=await Ed(e),n=await Id(e);return r=>{t(r),n(r)}}const no={"hello-triangle":Bl,textures:Yl,"normal-mapping":Jl,models:sd,"basic-heightmap":fd,"advanced-heightmap":_d,"expert-heightmap":xd,"cel-shading":Rd};document.querySelector("#app").innerHTML=`
  <span style="position: absolute">
    <select id="example">
      ${Object.keys(no).map(e=>`<option value="${e}">${e}</option>`).join(`
`)}
    </select>
    <a href="${"/miniengine/examples/".replace("examples/","")}">&lt;&lt; Docs</a>
  </span>
  <div id="container"></div>
`;const $t=document.querySelector("#example"),Cd=new URLSearchParams(location.search),wo=Cd.get("example");wo!==null&&($t.value=wo);$t.addEventListener("change",()=>{const e=new URL(location.href);e.searchParams.set("example",$t.value),history.replaceState({},"",e),Eo(no[$t.value],document.querySelector("#container"))});Eo(no[$t.value],document.querySelector("#container"));
